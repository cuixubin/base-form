/*!
 * DLShouWen Grid v1.2.0
 *
 * includes: jquery, bootstrap, fontawesome, My97 DatePicker
 * Copyright 2016, http://os.dlshouwen.com/grid, http://www.dlshouwen.com
 */(function(b){b.fn.dlshouwen||(b.fn.dlshouwen={});b.fn.dlshouwen.grid={init:function(l){for(var n=0;n<l.columns.length;n++)l.columns[n]=b.extend({},b.fn.dlshouwen.grid.defaultOptions.column,l.columns[n]);l=b.extend({},b.fn.dlshouwen.grid.defaultOptions.grid,l);l.id||(l.id=b.fn.dlshouwen.grid.tools.guid());b.fn.dlshouwen.grid.lang[l.lang]||(l.lang="en");for(var p={},n=0;n<l.columns.length;n++)p[l.columns[n].id]=l.columns[n].format;return{init:{toolsIsInit:!1,printWindowIsInit:!1,exportWindowIsInit:{},fastQueryWindowIsInit:!1,advanceQueryWindowIsInit:!1},pager:{pageSize:0,startRecord:0,nowPage:0,recordCount:0,pageCount:0,sqlString:"",params:""},option:l,originalDatas:null,baseDatas:null,exhibitDatas:null,sortParameter:{columnId:"",sortType:0},sortOriginalDatas:null,parameters:null,fastQueryParameters:null,fastQueryOriginalDatas:null,advanceQueryParameter:{advanceQueryConditions:null,advanceQuerySorts:null},printColumns:null,exportColumns:null,exportDatas:null,elementFormat:p,load:function(){var a=this;a.showProcessBar();if(0==a.init.toolsIsInit){a.init.toolsIsInit=!0;a.constructGridToolBar();a.pager.pageSize=a.option.pageSize;a.pager.startRecord=0;a.pager.nowPage=1;if(!a.option.ajaxLoad){a.hideProcessBar(function(){a.originalDatas=a.option.datas;a.originalDatas=a.originalDatas?a.originalDatas:[];a.baseDatas=a.originalDatas.slice(0,a.originalDatas.length);a.pager.recordCount=a.baseDatas.length;a.pager.pageCount=Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1;a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize);a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length);a.constructGrid();a.constructGridPageBar()});return}if(a.option.loadAll){var c=a.option.loadURL;b.ajax({type:"post",url:c,data:null,contentType:"application/x-www-form-urlencoded; charset\x3dutf-8",beforeSend:function(a){a.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(c){a.hideProcessBar(function(){a.originalDatas=b.parseJSON(c);a.originalDatas=a.originalDatas?a.originalDatas:[];a.baseDatas=a.originalDatas.slice(0,a.originalDatas.length);a.pager.recordCount=a.baseDatas.length;a.pager.pageCount=Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1;a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize);a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length);a.constructGrid();a.constructGridPageBar()})},error:function(c,d,e){a.hideProcessBar(function(){b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.lang[a.option.lang].errors.ajaxLoadError,"error",5E3);a.constructGrid();a.constructGridPageBar()})}});return}}if(!a.option.ajaxLoad||a.option.loadAll)a.hideProcessBar(function(){if(a.fastQueryParameters||a.advanceQueryParameter)a.baseDatas=a.originalDatas,a.fastQueryParameters&&(a.baseDatas=a.doFastQueryDatasFilter(a.baseDatas,a.fastQueryParameters)),a.advanceQueryParameter&&(a.baseDatas=a.doAdvanceQueryDatasFilter(a.baseDatas,a.advanceQueryParameter));a.pager.recordCount=a.baseDatas.length;a.pager.pageCount=0==a.pager.recordCount?0:Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1;a.pager.nowPage>a.pager.pageCount&&(a.pager.nowPage=a.pager.pageCount,a.pager.startRecord=a.pager.pageSize*(a.pager.nowPage-1));a.pager.startRecord=a.pager.pageSize*(a.pager.nowPage-1);0==a.baseDatas.length&&(a.pager.nowPage=1,a.pager.startRecord=0);a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize);a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length);a.constructGrid();a.constructGridPageBar()});else{var c=a.option.loadURL,d={isExport:!1};d.pageSize=a.pager.pageSize;d.startRecord=a.pager.startRecord;d.nowPage=a.pager.nowPage;d.recordCount=a.pager.recordCount?a.pager.recordCount:-1;d.pageCount=a.pager.pageCount?a.pager.pageCount:-1;d.parameters=a.parameters?a.parameters:{};d.fastQueryParameters=a.fastQueryParameters?a.fastQueryParameters:{};d.advanceQueryConditions=a.advanceQueryParameter&&a.advanceQueryParameter.advanceQueryConditions?a.advanceQueryParameter.advanceQueryConditions:[];d.advanceQuerySorts=a.advanceQueryParameter&&a.advanceQueryParameter.advanceQuerySorts?a.advanceQueryParameter.advanceQuerySorts:[];var e={};e.gridPager=JSON.stringify(d);b.ajax({type:"post",url:c,data:e,contentType:"application/x-www-form-urlencoded; charset\x3dutf-8",beforeSend:function(a){a.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(c){c=b.parseJSON(c);c.isSuccess?a.hideProcessBar(function(){a.exhibitDatas=c.exhibitDatas;a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length);a.pager.pageSize=c.pageSize;a.pager.startRecord=c.startRecord;a.pager.nowPage=c.nowPage;a.pager.recordCount=c.recordCount;a.pager.pageCount=c.pageCount;a.pager.sqlString=c.sqlString;a.pager.params=c.params;a.constructGrid();a.constructGridPageBar()}):(b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.lang[a.option.lang].errors.ajaxLoadError,"error",5E3),a.hideProcessBar())},error:function(c,d,e){a.hideProcessBar(function(){b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.lang[a.option.lang].errors.ajaxLoadError,"error",5E3);a.constructGrid();a.constructGridPageBar()})}})}},constructGrid:function(){var a=this,c=a.getExtraColumnClass(),d;d=""+('\x3ctable class\x3d"dlshouwen-grid '+a.option.tableClass+'" id\x3d"dlshouwen_grid_'+a.option.id+'" style\x3d"'+a.option.tableStyle+'"\x3e');if(0!=a.option.showHeader){var e=a.option.columns;d=d+'\x3cthead\x3e\t\x3ctr class\x3d"dlshouwen-grid-headers"\x3e'+('\t\t\x3cth class\x3d"extra-column '+c+'"\x3e\x3c/th\x3e');a.option.check&&(d+='\t\x3cth class\x3d"check-column"\x3e\x3cinput type\x3d"checkbox" id\x3d"dlshouwen_grid_'+a.option.id+'_check" value\x3d"check"\x3e\x3c/th\x3e');for(var g=0;g<e.length;g++)d+='\t\x3cth columnNo\x3d"'+g+'" columnId\x3d"'+e[g].id+'" class\x3d"dlshouwen-grid-header '+a.getColumnClassForHide(e[g])+" "+e[g].headerClass+' can-sort" style\x3d"'+e[g].headerStyle+'"\x3e',a.sortParameter&&a.sortParameter.columnId&&a.sortParameter.columnId==e[g].id&&("1"==a.sortParameter.sortType&&(d+='\x3cspan class\x3d"dlshouwen-grid-sort"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].sortColumn.asc+"\x3c/span\x3e"),"2"==a.sortParameter.sortType&&(d+='\x3cspan class\x3d"dlshouwen-grid-sort dlshouwen-grid-sort-desc"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].sortColumn.desc+"\x3c/span\x3e")),d+="\t\t"+e[g].title,d+="\t\x3c/th\x3e";d+="\t\x3c/tr\x3e\x3c/thead\x3e"}d+="\t\x3ctbody\x3e";if(null!=a.exhibitDatas)for(a.sortParameter&&a.sortParameter.columnId&&(a.exhibitDatas=0!=a.sortParameter.sortType?a.exhibitDatas.sort(function(b,c){var f=b[a.sortParameter.columnId],g=c[a.sortParameter.columnId];if(!isNaN(f)&&!isNaN(g)){if(1==a.sortParameter.sortType)return f-g;if(2==a.sortParameter.sortType)return g-f}if(f instanceof Date&&g instanceof Date){if(1==a.sortParameter.sortType)return f.getTime()-g.getTime();if(2==a.sortParameter.sortType)return g.getTime()-f.getTime()}return null!=f&&1==a.sortParameter.sortType?f.localeCompare(g):null!=g&&2==a.sortParameter.sortType?g.localeCompare(f):0}):a.sortOriginalDatas.slice(0,a.sortOriginalDatas.length)),g=0;g<a.exhibitDatas.length;g++){d+='\t\x3ctr class\x3d"dlshouwen-grid-row" dataNo\x3d"'+g+'"\x3e';d+='\t\t\x3ctd class\x3d"extra-column extra-column-event '+c+'" dataNo\x3d"'+g+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].extraColumn.open+"\x3c/td\x3e";a.option.check&&(d+='\t\x3ctd class\x3d"check-column text-center"\x3e\x3cinput type\x3d"checkbox" dataNo\x3d"'+g+'" id\x3d"dlshouwen_grid_'+a.option.id+"_check_"+g+'" class\x3d"dlshouwen-grid-check" value\x3d"'+g+'"\x3e\x3c/td\x3e');for(var e=a.option.columns,h=0;h<e.length;h++){d+='\t\x3ctd dataNo\x3d"'+g+'" columnNo\x3d"'+h+'" class\x3d"dlshouwen-grid-cell '+a.getColumnClassForHide(e[h])+" "+e[h].columnClass+'" style\x3d"'+e[h].columnStyle+'"\x3e';var k=a.exhibitDatas[g][e[h].id],k=null==k?"":k;d=e[h].resolution?d+e[h].resolution(k,a.exhibitDatas[g],e[h],a,g,h):d+a.formatContent(e[h],k);d+="\t\x3c/td\x3e"}d+="\t\x3c/tr\x3e";d+='\t\x3ctr id\x3d"dlshouwen_grid_'+a.option.id+"_extra_columns_"+g+'" class\x3d"dlshouwen-grid-extra-columns hidden"\x3e';d+='\t\t\x3ctd dataNo\x3d"'+g+'" colspan\x3d"'+(e.length+1+(a.option.check?1:0))+'"\x3e';for(h=0;h<e.length;h++)0!=e[h].extra&&(d+='\t\t\x3cp dataNo\x3d"'+g+'" columnNo\x3d"'+h+'" class\x3d"dlshouwen-grid-cell '+a.getExtraColumnClassForHide(e[h])+'"\x3e',d+="\t\t\t"+e[h].title+" : ",k=a.exhibitDatas[g][e[h].id],k=null==k?"":k,d=e[h].resolution?d+e[h].resolution(k,a.exhibitDatas[g],e[h],a,g,h):d+a.formatContent(e[h],k),d+="\t\t\x3c/p\x3e");d+="\t\t\x3c/td\x3e";d+="\t\x3c/tr\x3e"}d+="\t\x3c/tbody\x3e\x3c/table\x3e";b("#dlshouwen_grid_"+a.option.id).remove();b("#"+a.option.gridContainer).append(d);var f=a.option.id;a.option.onCellClick&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").click(function(b){a.bindCellEvent(a.option.onCellClick,this,b)});a.option.onCellDblClick&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").dblclick(function(b){a.bindCellEvent(a.option.onCellDblClick,this,b)});a.option.onCellMouseOver&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseover(function(b){a.bindCellEvent(a.option.onCellMouseOver,this,b)});a.option.onCellMouseMove&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mousemove(function(b){a.bindCellEvent(a.option.onCellMouseMove,this,b)});a.option.onCellMouseOut&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseout(function(b){a.bindCellEvent(a.option.onCellMouseOut,this,b)});a.option.onCellMouseDown&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mousedown(function(b){a.bindCellEvent(a.option.onCellMouseDown,this,b)});a.option.onCellMouseUp&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseup(function(b){a.bindCellEvent(a.option.onCellMouseUp,this,b)});a.option.onRowClick&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").click(function(b){a.bindRowEvent(a.option.onRowClick,this,b)});a.option.onRowDblClick&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").dblclick(function(b){a.bindRowEvent(a.option.onRowDblClick,this,b)});a.option.onRowMouseOver&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseover(function(b){a.bindRowEvent(a.option.onRowMouseOver,this,b)});a.option.onRowMouseMove&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mousemove(function(b){a.bindRowEvent(a.option.onRowMouseMove,this,b)});a.option.onRowMouseOut&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseout(function(b){a.bindRowEvent(a.option.onRowMouseOut,this,b)});a.option.onRowMouseDown&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mousedown(function(b){a.bindRowEvent(a.option.onRowMouseDown,this,b)});a.option.onRowMouseUp&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-cell").mouseup(function(b){a.bindRowEvent(a.option.onRowMouseUp,this,b)});a.option.onHeaderClick&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").click(function(b){a.bindHeaderEvent(a.option.onHeaderClick,this,b)});a.option.onHeaderMouseOver&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").mouseover(function(b){a.bindHeaderEvent(a.option.onHeaderMouseOver,this,b)});a.option.onHeaderMouseMove&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").mousemove(function(b){a.bindHeaderEvent(a.option.onHeaderMouseMove,this,b)});a.option.onHeaderMouseOut&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").mouseout(function(b){a.bindHeaderEvent(a.option.onHeaderMouseOut,this,b)});a.option.onHeaderMouseDown&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").mousedown(function(b){a.bindHeaderEvent(a.option.onHeaderMouseDown,this,b)});a.option.onHeaderMouseUp&&b("#dlshouwen_grid_"+f+" .dlshouwen-grid-header").mouseup(function(b){a.bindHeaderEvent(a.option.onHeaderMouseUp,this,b)});a.option.onGridClick&&b("#dlshouwen_grid_"+f).click(function(b){a.bindGridEvent(a.option.onGridClick,b)});a.option.onGridDblClick&&b("#dlshouwen_grid_"+f).dblclick(function(b){a.bindGridEvent(a.option.onGridDblClick,b)});a.option.onGridMouseOver&&b("#dlshouwen_grid_"+f).mouseover(function(b){a.bindGridEvent(a.option.onGridMouseOver,b)});a.option.onGridMouseMove&&b("#dlshouwen_grid_"+f).mousemove(function(b){a.bindGridEvent(a.option.onGridMouseMove,b)});a.option.onGridMouseOut&&b("#dlshouwen_grid_"+f).mouseout(function(b){a.bindGridEvent(a.option.onGridMouseOut,b)});a.option.onGridMouseDown&&b("#dlshouwen_grid_"+f).mousedown(function(b){a.bindGridEvent(a.option.onGridMouseDown,b)});a.option.onGridMouseUp&&b("#dlshouwen_grid_"+f).mouseup(function(b){a.bindGridEvent(a.option.onGridMouseUp,b)});a.option.onGridComplete&&a.bindGridEvent(a.option.onGridComplete);b("#dlshouwen_grid_"+f+" .extra-column-event").click(function(c){var g=b(this).attr("dataNo");b("#dlshouwen_grid_"+f+"_extra_columns_"+g).hasClass("hidden")?(b("#dlshouwen_grid_"+f+"_extra_columns_"+g).removeClass("hidden"),b(this).html(b.fn.dlshouwen.grid.lang[a.option.lang].extraColumn.close),a.option.onExtraOpen&&(g=b("#dlshouwen_grid_"+f+' tr[dataNo\x3d"'+g+'"]'),a.bindExtraEvent(a.option.onExtraOpen,g,c))):(b("#dlshouwen_grid_"+f+"_extra_columns_"+g).addClass("hidden"),b(this).html(b.fn.dlshouwen.grid.lang[a.option.lang].extraColumn.open),a.option.onExtraClose&&(g=b("#dlshouwen_grid_"+f+' tr[dataNo\x3d"'+g+'"]'),a.bindExtraEvent(a.option.onExtraClose,g,c)))});b("#dlshouwen_grid_"+f+" .can-sort").click(function(){var c=b(this).attr("columnId");null==a.sortParameter&&(a.sortParameter={});a.sortParameter.columnId&&a.sortParameter.columnId==c?(c=a.sortParameter.sortType,0==c?a.sortParameter.sortType=1:1==c?a.sortParameter.sortType=2:2==c&&(a.sortParameter.sortType=0)):(a.sortParameter.columnId=c,a.sortParameter.sortType=1);a.reload()});a.option.onCheck&&b("input[id*\x3ddlshouwen_grid_"+f+"_check_]").click(function(b){a.bindCheckEvent(a.option.onCheck,this,b)});a.option.check&&b("#dlshouwen_grid_"+f+"_check").click(function(c){b("input[id*\x3ddlshouwen_grid_"+f+"_check_]").attr("checked",this.checked);a.option.onCheck&&b("input[id*\x3ddlshouwen_grid_"+f+"_check_]").each(function(){a.bindCheckEvent(a.option.onCheck,this,c)})})},bindCellEvent:function(a,c,d){var e=this.option.id,g=b(c).attr("dataNo"),h=b(c).attr("columnNo"),k=this.option.columns[h],f=this.exhibitDatas[g],q;q=k.resolution?k.resolution(f[k.id],f,k,this,g,h):this.formatContent(k,f[k.id]);c=b(c);var m=b("#dlshouwen_grid_"+e+' tr[dataNo\x3d"'+g+'"]'),e=b("#dlshouwen_grid_"+e+' .dlshouwen-grid-extra-columns\x3etd[dataNo\x3d"'+g+'"]');a(q,f,k,this,g,h,c,m,e,d)},bindRowEvent:function(a,c,d){var e=this.option.id,g=b(c).attr("dataNo"),h=b(c).attr("columnNo"),k=this.option.columns[h],f=this.exhibitDatas[g],q;q=k.resolution?k.resolution(f[k.id],f,k,this,g,h):this.formatContent(k,f[k.id]);c=b(c);var m=b("#dlshouwen_grid_"+e+' tr[dataNo\x3d"'+g+'"]'),e=b("#dlshouwen_grid_"+e+' .dlshouwen-grid-extra-columns\x3etd[dataNo\x3d"'+g+'"]');a(q,f,k,this,g,h,c,m,e,d)},bindHeaderEvent:function(a,c,d){var e=this.option.id,g=b(c).attr("columnNo"),h=this.option.columns[g],k=h.title;c=b(c);e=b("#dlshouwen_grid_"+e+" tr.dlshouwen-grid-headers");a(k,h,this,g,c,e,d)},bindGridEvent:function(a,b){a(this,b)},bindExtraEvent:function(a,c,d){var e=this.option.id;c=b(c).attr("dataNo");var g=this.exhibitDatas[c],h=b("#dlshouwen_grid_"+e+' tr[dataNo\x3d"'+c+'"]'),e=b("#dlshouwen_grid_"+e+' .dlshouwen-grid-extra-columns\x3etd[dataNo\x3d"'+c+'"]');a(g,this,c,h,e,d)},bindCheckEvent:function(a,c,d){var e=this.option.id,g=b(c).attr("dataNo"),h=this.exhibitDatas[g],k=b("#dlshouwen_grid_"+e+' tr[dataNo\x3d"'+g+'"]'),e=b("#dlshouwen_grid_"+e+' .dlshouwen-grid-extra-columns\x3etd[dataNo\x3d"'+g+'"]');a(c.checked,h,this,g,k,e,d)},constructGridPageBar:function(){var a=this;b("#"+a.option.toolbarContainer+" .dlshouwen-grid-pager").html("");var c=a.pager.nowPage,d=a.pager.pageCount,e=document.createElement("span");if(null==a.exhibitDatas||0>=a.exhibitDatas.length)e.className="dlshouwen-grid-pager-status text-primary",e.innerHTML=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nothing;else{e.className="dlshouwen-grid-pager-status text-primary";var g=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.info,g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{startRecord}",a.pager.startRecord),g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{nowPage}",a.pager.nowPage),g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{recordCount}",a.pager.recordCount),g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{pageCount}",a.pager.pageCount),h="",k=a.pager.pageSize;if("object"==typeof a.option.pageSizeLimit){for(var h=h+('\x3cselect id\x3d"dlshouwen_grid_change_page_size_'+a.option.id+'" name\x3d"dlshouwen_grid_change_page_size_'+a.option.id+'" class\x3d"form-control change-page-size"\x3e'),f=!1,q=[],m=0;m<a.option.pageSizeLimit.length;m++){var l=a.option.pageSizeLimit[m];q.push(parseFloat(l));k==l&&(f=!0)}f||q.push(k);q.sort(function(a,b){return a>b});for(m=0;m<q.length;m++)l=q[m],h+="\t\x3coption "+(k==l?'selected\x3d"selected"':"")+' value\x3d"'+l+'"\x3e'+l+"\x3c/option\x3e";g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{pageSize}",h+"\x3c/select\x3e")}else"number"==typeof a.option.pageSizeLimit?(h+='\x3cinput id\x3d"dlshouwen_grid_change_page_size_'+a.option.id+'" name\x3d"dlshouwen_grid_change_page_size_'+a.option.id+'" type\x3d"text" class\x3d"form-control change-page-size" value\x3d"'+a.pager.pageSize+'" /\x3e',g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{pageSize}",h)):g=b.fn.dlshouwen.grid.tools.replaceAll(g,"{pageSize}",k);e.innerHTML=g}m=document.createElement("ul");m.id=a.option.id+"_dlshouwenGridOperations";m.className="pagination dlshouwen-grid-pager-button";b("#"+a.option.toolbarContainer+" .dlshouwen-grid-pager").append(m);b("#"+a.option.toolbarContainer+" .dlshouwen-grid-pager").append(e);b("#dlshouwen_grid_change_page_size_"+a.option.id).change(function(){var c=parseFloat(this.value);isNaN(c)?(b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.errors.notANumber,"warning",3E3),b("#dlshouwen_grid_change_page_size_"+a.option.id).val(a.pager.pageSize)):"number"==typeof a.option.pageSizeLimit&&c>a.option.pageSizeLimit?(b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.errors.maxPageSize,"{pageSizeLimit}",a.option.pageSizeLimit),"warning",3E3),b("#dlshouwen_grid_change_page_size_"+a.option.id).val(a.pager.pageSize)):(a.pager.pageSize=c,a.reload(!0))});if(null!=a.exhibitDatas&&0<a.exhibitDatas.length){m=document.createElement("li");m.id="dlshouwen_grid_"+a.option.id+"_page_first";m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.firstPageTitle;1>=c&&(m.className="disabled",m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.alreadyFirstPage);m.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.firstPage+"\x3c/a\x3e";b("#"+a.option.id+"_dlshouwenGridOperations").append(m);b("#dlshouwen_grid_"+a.option.id+"_page_first").click(function(){a.loadByPage("first")});m=document.createElement("li");m.id="dlshouwen_grid_"+a.option.id+"_page_prev";m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.prevPageTitle;1>=c&&(m.className="disabled",m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.alreadyFirstPage);m.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.prevPage+"\x3c/a\x3e";b("#"+a.option.id+"_dlshouwenGridOperations").append(m);b("#dlshouwen_grid_"+a.option.id+"_page_prev").click(function(){a.loadByPage("prev")});if(5>=d)for(m=1;m<=d;m++)g=document.createElement("li"),g.id="dlshouwen_grid_"+a.option.id+"_page_"+m,g.setAttribute("page",m),g.title=b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nowPageTitle,"{nowPage}",m),g.className=m==c?"active":"",g.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nowPage,"{nowPage}",m)+"\x3c/a\x3e",b("#"+a.option.id+"_dlshouwenGridOperations").append(g),m!=c&&b("#dlshouwen_grid_"+a.option.id+"_page_"+m).click(function(){a.goPage(b(this).attr("page"))});else for(m=1>c-2?1:c-2,e=c+2>d?d:c+2,5>e-m+1&&(1==m&&(e+=5-(e-m+1),e=e>d?d:e),e==d&&(m-=5-(e-m+1),m=1>m?1:m));m<=e;m++)g=document.createElement("li"),g.id="dlshouwen_grid_"+a.option.id+"_page_"+m,g.setAttribute("page",m),g.title=b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nowPageTitle,"{nowPage}",m),g.className=m==c?"active":"",g.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nowPage,"{nowPage}",m)+"\x3c/a\x3e",b("#"+a.option.id+"_dlshouwenGridOperations").append(g),m!=c&&b("#dlshouwen_grid_"+a.option.id+"_page_"+m).click(function(){a.goPage(b(this).attr("page"))});m=document.createElement("li");m.className="active";m.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+a.pager.nowPage+"\x3c/a\x3e";m=document.createElement("li");m.id="dlshouwen_grid_"+a.option.id+"_page_next";m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nextPageTitle;c>=d&&(m.className="disabled",m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.alreadyLastPage);m.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.nextPage+"\x3c/a\x3e";b("#"+a.option.id+"_dlshouwenGridOperations").append(m);b("#dlshouwen_grid_"+a.option.id+"_page_next").click(function(){a.loadByPage("next")});m=document.createElement("li");m.id="dlshouwen_grid_"+a.option.id+"_page_last";m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.lastPageTitle;c>=d&&(m.className="disabled",m.title=b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.alreadyLastPage);m.innerHTML='\x3ca href\x3d"javascript:void(0);"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].pageInfo.lastPage+"\x3c/a\x3e";b("#"+a.option.id+"_dlshouwenGridOperations").append(m);b("#dlshouwen_grid_"+a.option.id+"_page_last").click(function(){a.loadByPage("last")})}b("#"+a.option.toolbarContainer+" .dlshouwen-grid-pager").append('\x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e');b("#"+a.option.toolbarContainer).append('\x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e')},toolbar:function(a){return{refresh:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.refreshTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"refreshGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.refresh+"\x3c/a\x3e\x3c/li\x3e",fastQuery:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.fastQueryTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"fastQuery_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.fastQuery+"\x3c/a\x3e\x3c/li\x3e",advanceQuery:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.advanceQueryTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"advanceQuery_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.advanceQuery+"\x3c/a\x3e\x3c/li\x3e",exportExcel:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportExcelTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"exportExcelGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportExcel+"\x3c/a\x3e\x3c/li\x3e",exportCsv:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportCsvTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"exportCsvGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportCsv+"\x3c/a\x3e\x3c/li\x3e",exportPdf:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportPdfTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"exportPdfGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportPdf+"\x3c/a\x3e\x3c/li\x3e",exportTxt:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportTxtTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"exportTxtGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.exportTxt+"\x3c/a\x3e\x3c/li\x3e",print:'\x3cli title\x3d"'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.printTitle+'"\x3e\x3ca href\x3d"javascript:void(0);" id\x3d"printGrid_replaceId"\x3e'+b.fn.dlshouwen.grid.lang[this.option.lang].toolbar.print+"\x3c/a\x3e\x3c/li\x3e"}[a]},constructGridToolBar:function(){var a=this;b("#"+a.option.toolbarContainer).html('\x3cspan class\x3d"pagination dlshouwen-grid-tools"\x3e\x3c/span\x3e\x3cspan class\x3d"dlshouwen-grid-pager"\x3e\x3c/span\x3e');if(void 0!=a.option.tools&&null!=a.option.tools&&""!=a.option.tools)for(var c=a.option.tools,d=0;d<c.split("|").length;d++){var e=c.split("|")[d];if("refresh"==e){var g=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("refresh"),"replaceId",a.option.id);b("#"+a.option.toolbarContainer+" .dlshouwen-grid-tools").append(g);b("#refreshGrid_"+a.option.id).click(function(){a.reload(!0)})}"fastQuery"==e&&(g=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("fastQuery"),"replaceId",a.option.id),b("#"+a.option.toolbarContainer+" .dlshouwen-grid-tools").append(g),b("#fastQuery_"+a.option.id).click(function(){a.fastQuery()}));"advanceQuery"==e&&(g=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("advanceQuery"),"replaceId",a.option.id),b("#"+a.option.toolbarContainer+" .dlshouwen-grid-tools").append(g),b("#advanceQuery_"+a.option.id).click(function(){a.advanceQuery()}));if(-1!=e.indexOf("export")){for(var e=b.fn.dlshouwen.grid.tools.replaceAll(e,"export",""),e=b.fn.dlshouwen.grid.tools.replaceAll(e,"\\[",""),e=b.fn.dlshouwen.grid.tools.replaceAll(e,"\\]",""),g="",h=0;h<e.split(",").length;h++){var k=e.split(",")[h];"excel"==k&&(g+=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("exportExcel"),"replaceId",a.option.id));"csv"==k&&(g+=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("exportCsv"),"replaceId",a.option.id));"pdf"==k&&(g+=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("exportPdf"),"replaceId",a.option.id));"txt"==k&&(g+=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("exportTxt"),"replaceId",a.option.id))}b("#"+a.option.toolbarContainer+" .dlshouwen-grid-tools").append(g);for(h=0;h<e.split(",").length;h++)k=e.split(",")[h],"excel"==k&&b("#exportExcelGrid_"+a.option.id).click(function(){a.exportFile("excel")}),"csv"==k&&b("#exportCsvGrid_"+a.option.id).click(function(){a.exportFile("csv")}),"pdf"==k&&b("#exportPdfGrid_"+a.option.id).click(function(){a.exportFile("pdf")}),"txt"==k&&b("#exportTxtGrid_"+a.option.id).click(function(){a.exportFile("txt")})}"print"==e&&(g=b.fn.dlshouwen.grid.tools.replaceAll(a.toolbar("print"),"replaceId",a.option.id),b("#"+a.option.toolbarContainer+" .dlshouwen-grid-tools").append(g),b("#printGrid_"+a.option.id).click(function(){a.print()}))}},processBarThread:null,processWidth:null,showProcessBar:function(){var a=this;clearInterval(a.processBarThread);b("#dlshouwen_grid_process_bar_top_"+a.option.id).remove();b("#dlshouwen_grid_process_bar_bottom_"+a.option.id).remove();a.processWidth=0;a.processBarThread=null;var c;c=""+('\x3cdiv class\x3d"dlshouwen-grid-process-bar-top bg-primary" id\x3d"dlshouwen_grid_process_bar_top_'+a.option.id+'"\x3e\x3c/div\x3e');c+='\x3cdiv class\x3d"dlshouwen-grid-process-bar-bottom bg-primary" id\x3d"dlshouwen_grid_process_bar_bottom_'+a.option.id+'"\x3e\x3c/div\x3e';b("#"+a.option.gridContainer).append(c);a.processWidth+=Math.random()*(100-a.processWidth)*.1;b("#dlshouwen_grid_process_bar_top_"+a.option.id).animate({width:a.processWidth+"%"},200);b("#dlshouwen_grid_process_bar_bottom_"+a.option.id).animate({width:a.processWidth+"%"},200);a.processBarThread=setInterval(function(){a.processWidth+=Math.random()*(100-a.processWidth)*.1;b("#dlshouwen_grid_process_bar_top_"+a.option.id).animate({width:a.processWidth+"%"},200);b("#dlshouwen_grid_process_bar_bottom_"+a.option.id).animate({width:a.processWidth+"%"},200)},200)},hideProcessBar:function(a){var c=this;clearInterval(c.processBarThread);c=this;b("#dlshouwen_grid_process_bar_top_"+c.option.id).animate({width:"100%"},100,function(){b("#dlshouwen_grid_process_bar_top_"+c.option.id).remove();try{a()}catch(d){}});b("#dlshouwen_grid_process_bar_bottom_"+c.option.id).animate({width:"100%"},100,function(){b("#dlshouwen_grid_process_bar_bottom_"+c.option.id).remove()})},formatContent:function(a,c){try{if(a.codeTable){var d=a.codeTable[c];return d?d:c}if("number"==a.type&&a.format)return b.fn.dlshouwen.grid.tools.numberFormat(c,a.format);if("date"==a.type&&a.format)if(a.otype){if("time_stamp_s"==a.otype)return c=new Date(1E3*parseFloat(c)),b.fn.dlshouwen.grid.tools.dateFormat(c,a.format);if("time_stamp_ms"==a.otype)return c=new Date(parseFloat(c)),b.fn.dlshouwen.grid.tools.dateFormat(c,a.format);if("string"==a.otype&&a.oformat)return c=b.fn.dlshouwen.grid.tools.toDate(c,a.oformat),b.fn.dlshouwen.grid.tools.dateFormat(c,a.format)}else return b.fn.dlshouwen.grid.tools.dateFormat(c,a.format)}catch(e){}return c},getExtraColumnClass:function(){for(var a="",b=[!0,!0,!0,!0],d=this.option.columns,e=0;e<d.length;e++){var g=d[e];if(1!=g.hide&&void 0!=g.hideType)for(var g=g.hideType.split("|"),h=0;h<g.length;h++){var k=g[h];"lg"==k&&(b[0]="visible-lg");"md"==k&&(b[1]="visible-md");"sm"==k&&(b[2]="visible-sm");"xs"==k&&(b[3]="visible-xs")}}for(e=0;e<b.length;e++)1!=b[e]&&(a+=b[e]+" ");""==a&&(a="hidden ");return a},getColumnClassForHide:function(a){var b="";if(1==a.hide)return b+"hidden ";if(void 0!=a.hideType){a=a.hideType.split("|");for(var d=0;d<a.length;d++){var e=a[d];"lg"==e&&(b+="hidden-lg ");"md"==e&&(b+="hidden-md ");"sm"==e&&(b+="hidden-sm ");"xs"==e&&(b+="hidden-xs ")}}return b},getExtraColumnClassForHide:function(a){var b="";if(1==a.hide)return b+"hidden ";if(void 0!=a.hideType){a=a.hideType.split("|");for(var d=0;d<a.length;d++){var e=a[d];"lg"==e&&(b+="visible-lg ");"md"==e&&(b+="visible-md ");"sm"==e&&(b+="visible-sm ");"xs"==e&&(b+="visible-xs ")}""==b&&(b="hidden ")}else b="hidden ";return b},goPage:function(a){var b=this.pager.pageSize,d=this.pager.pageCount;a=parseFloat(a);isNaN(a)||(0<a&&a<=d&&(this.pager.nowPage=a,this.pager.startRecord=b*(a-1),this.load()),0>=a&&this.loadByPage("first"),a>d&&this.loadByPage("last"))},loadByPage:function(a){a=a?a:"";if("first"==a)a=this.pager.nowPage,1<a&&(this.pager.startRecord=0,this.pager.nowPage=1,this.load());else if("prev"==a){a=this.pager.nowPage;var b=this.pager.pageSize;1<a&&(a--,this.pager.nowPage=a,this.pager.startRecord=b*(a-1),this.load())}else if("next"==a){a=this.pager.nowPage;var b=this.pager.pageSize,d=this.pager.pageCount;a<d&&(a++,this.pager.nowPage=a,this.pager.startRecord=b*(a-1),this.load())}else"last"==a?(a=this.pager.nowPage,d=this.pager.pageCount,a<d&&(b=this.pager.pageSize,d=this.pager.pageCount,this.pager.nowPage=0==d?1:d,this.pager.startRecord=b*(d-1),0>this.pager.startRecord&&(this.pager.startRecord=0),this.load())):this.load()},fastQuery:function(){var a=this;if(a.init.fastQueryWindowIsInit)b("#fast_query_"+a.option.id+"_modal").modal("show");else{var c;c=""+b.fn.dlshouwen.grid.tools.getWindowStart("fast_query_"+a.option.id,b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.title);c=c+'\x3cdiv class\x3d"modal-body"\x3e'+('\t\x3cform class\x3d"form-horizontal" id\x3d"fastQueryForm_'+a.option.id+'"\x3e');for(var d=0;d<a.option.columns.length;d++){var e=a.option.columns[d];if(1==e.fastQuery){c+='\x3cdiv class\x3d"form-group"\x3e';c+='\t\x3clabel class\x3d"col-sm-3 control-label text-right"\x3e'+e.title+"\uff1a\x3c/label\x3e";if("range"==e.fastQueryType)c+='\x3cdiv class\x3d"col-sm-4"\x3e',"date"==e.type?(c+='\x3cdiv class\x3d"input-group"\x3e',c+='\t\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"ge_'+e.id+'" name\x3d"ge_'+e.id+'" format\x3d"'+e.format+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.selectStart+e.title+'" onclick\x3d"WdatePicker({dateFmt:\''+b.fn.dlshouwen.grid.tools.replaceAll(e.format,"h","H")+"'});\" /\x3e",c+='\t\x3cdiv class\x3d"input-group-addon"\x3e\x3ci class\x3d"fa fa-calendar"\x3e\x3c/i\x3e\x3c/div\x3e',c+="\x3c/div\x3e"):c+='\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"ge_'+e.id+'" name\x3d"ge_'+e.id+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.inputStart+e.title+'" /\x3e',c+="\x3c/div\x3e",c+='\x3cdiv class\x3d"col-sm-4"\x3e',"date"==e.type?(c+='\x3cdiv class\x3d"input-group"\x3e',c+='\t\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"le_'+e.id+'" name\x3d"le_'+e.id+'" format\x3d"'+e.format+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.selectEnd+e.title+'" onclick\x3d"WdatePicker({dateFmt:\''+b.fn.dlshouwen.grid.tools.replaceAll(e.format,"h","H")+"'});\" /\x3e",c+='\t\x3cdiv class\x3d"input-group-addon"\x3e\x3ci class\x3d"fa fa-calendar"\x3e\x3c/i\x3e\x3c/div\x3e',c+="\x3c/div\x3e"):c+='\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"le_'+e.id+'" name\x3d"le_'+e.id+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.inputEnd+e.title+'" /\x3e';else if(e.codeTable){c+='\x3cdiv class\x3d"col-sm-4"\x3e';c+='\t\x3cselect class\x3d"form-control" id\x3d"'+e.fastQueryType+"_"+e.id+'" name\x3d"'+e.fastQueryType+"_"+e.id+'"\x3e';c+='\t\t\x3coption value\x3d""\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.codeTableSelectAll+"\x3c/option\x3e";for(var g in e.codeTable)c+='\t\x3coption value\x3d"'+g+'"\x3e'+e.codeTable[g]+"\x3c/option\x3e";c+="\t\x3c/select\x3e"}else if(c+='\x3cdiv class\x3d"col-sm-4"\x3e',"date"==e.type){c+='\x3cdiv class\x3d"input-group"\x3e';var h=b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.selectStart;if("lt"==e.fastQueryType||"le"==e.fastQueryType)h=b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.selectEnd;c+='\t\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"'+e.fastQueryType+"_"+e.id+'" name\x3d"'+e.fastQueryType+"_"+e.id+'" format\x3d"'+e.format+'" placeholder\x3d"'+h+e.title+'" onclick\x3d"WdatePicker({dateFmt:\''+b.fn.dlshouwen.grid.tools.replaceAll(e.format,"h","H")+"'});\" /\x3e";c+='\t\x3cdiv class\x3d"input-group-addon"\x3e\x3ci class\x3d"fa fa-calendar"\x3e\x3c/i\x3e\x3c/div\x3e';c+="\x3c/div\x3e"}else c+='\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"'+e.fastQueryType+"_"+e.id+'" name\x3d"'+e.fastQueryType+"_"+e.id+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.input+e.title+'" /\x3e';c+="\x3c/div\x3e";c+="\x3c/div\x3e"}}d=""+('\x3cbutton type\x3d"button" class\x3d"btn btn-warning" id\x3d"resetFastQuery_'+a.option.id+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.buttons.reset+"\x3c/button\x3e");d+='\x3cbutton type\x3d"button" class\x3d"btn btn-primary" id\x3d"doFastQuery_'+a.option.id+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].fastQuery.buttons.query+"\x3c/button\x3e";c=c+"\t\x3c/form\x3e\x3c/div\x3e"+b.fn.dlshouwen.grid.tools.getWindowEnd(b.fn.dlshouwen.grid.lang[a.option.lang].buttons.close,d);b("body").append(c);b("#resetFastQuery_"+a.option.id).click(function(){document.forms["fastQueryForm_"+a.option.id].reset()});b("#doFastQuery_"+a.option.id).click(function(){a.doFastQuery(document.forms["fastQueryForm_"+a.option.id]);b("#fast_query_"+a.option.id+"_modal").modal("hide")});b("#fast_query_"+a.option.id+"_modal").modal("show");a.init.fastQueryWindowIsInit=!0}},doFastQuery:function(a){this.fastQueryParameters={};a=a.elements;for(var c=0;c<a.length;c++){var d=a[c];b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"text")||b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"hidden")||b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"textarea")||b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"select-one")||b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"password")?""!=d.name&&(this.fastQueryParameters[d.name]=d.value):(b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"checkbox")||b.fn.dlshouwen.grid.tools.equalsIgnoreCase(d.type,"radio"))&&d.checked&&""!=d.name&&(this.fastQueryParameters[d.name]=d.value)}this.load()},doFastQueryDatasFilter:function(a,c){for(var d=[],e=0;e<a.length;e++){var g=a[e],h=!0,k;for(k in c)if(c[k]&&null!=c[k]&&""!=c[k]){if(b.fn.dlshouwen.grid.tools.startsWith(k,"eq_")){var f=g[k.replace("eq_","")],f=f?f:"";if(f!=c[k]){h=!1;continue}}if(b.fn.dlshouwen.grid.tools.startsWith(k,"ne_")&&(f=(f=g[k.replace("ne_","")])?f:"",f==c[k])){h=!1;continue}if(b.fn.dlshouwen.grid.tools.startsWith(k,"lk_")&&(f=(f=g[k.replace("lk_","")])?f:"",-1==f.indexOf(c[k]))){h=!1;continue}if(b.fn.dlshouwen.grid.tools.startsWith(k,"ll_")&&(f=(f=g[k.replace("ll_","")])?f:"",!b.fn.dlshouwen.grid.tools.startsWith(f,c[k]))){h=!1;continue}if(b.fn.dlshouwen.grid.tools.startsWith(k,"rl_")&&(f=(f=g[k.replace("rl_","")])?f:"",!b.fn.dlshouwen.grid.tools.endsWith(f,c[k]))){h=!1;continue}if(b.fn.dlshouwen.grid.tools.startsWith(k,"gt_")){f=(f=g[k.replace("gt_","")])?f:"";if(f instanceof Date&&0>=f.getTime()-b.fn.dlshouwen.grid.tools.toDate(c[k],this.elementFormat[k.replace("gt_","")]).getTime()){h=!1;continue}if(!(f instanceof Date||isNaN(f))&&0>=parseFloat(f)-parseFloat(c[k])){h=!1;continue}if(!(f instanceof Date)&&isNaN(f)&&0>=f.localeCompare(c[k])){h=!1;continue}}if(b.fn.dlshouwen.grid.tools.startsWith(k,"ge_")){f=(f=g[k.replace("ge_","")])?f:"";if(f instanceof Date&&0>f.getTime()-b.fn.dlshouwen.grid.tools.toDate(c[k],this.elementFormat[k.replace("ge_","")]).getTime()){h=!1;continue}if(!(f instanceof Date||isNaN(f))&&0>parseFloat(f)-parseFloat(c[k])){h=!1;continue}if(!(f instanceof Date)&&isNaN(f)&&0>f.localeCompare(c[k])){h=!1;continue}}if(b.fn.dlshouwen.grid.tools.startsWith(k,"lt_")){f=(f=g[k.replace("lt_","")])?f:"";if(f instanceof Date&&0<=f.getTime()-b.fn.dlshouwen.grid.tools.toDate(c[k],this.elementFormat[k.replace("lt_","")]).getTime()){h=!1;continue}if(!(f instanceof Date||isNaN(f))&&0<=parseFloat(f)-parseFloat(c[k])){h=!1;continue}if(!(f instanceof Date)&&isNaN(f)&&0<=f.localeCompare(c[k])){h=!1;continue}}b.fn.dlshouwen.grid.tools.startsWith(k,"le_")&&(f=(f=g[k.replace("le_","")])?f:"",f instanceof Date&&0<f.getTime()-b.fn.dlshouwen.grid.tools.toDate(c[k],this.elementFormat[k.replace("le_","")]).getTime()?h=!1:!(f instanceof Date||isNaN(f))&&0<parseFloat(f)-parseFloat(c[k])?h=!1:f instanceof Date||!isNaN(f)||0<f.localeCompare(c[k])&&(h=!1))}h&&d.push(g)}return d},advanceQuery:function(){var a=this;if(a.init.advanceQueryWindowIsInit)b("#advance_query_"+a.option.id+"_modal").modal("show");else{var c;c=""+b.fn.dlshouwen.grid.tools.getWindowStart("advance_query_"+a.option.id,b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.title,"lg");c=c+'\x3cdiv class\x3d"modal-body advance-query"\x3e\t\x3cdiv class\x3d"row"\x3e\t\t\x3cdiv class\x3d"col-lg-3 col-md-3 col-sm-3"\x3e\t\t\t\x3cdiv class\x3d"panel-group accordion" id\x3d"accordion"\x3e\t\t\t\t\x3cdiv class\x3d"panel panel-default"\x3e'+('\t\t\t\t\t\x3cdiv class\x3d"panel-heading" data-toggle\x3d"collapse" data-toggle\x3d"collapse" data-parent\x3d"#accordion" href\x3d"#advance_query_list_'+a.option.id+'"\x3e');c=c+'\t\t\t\t\t\t\x3cstrong\x3e\x3ci class\x3d"fa fa-folder-o"\x3e\x3c/i\x3e\u67e5\u8be2\u65b9\u6848\x3c/strong\x3e\t\t\t\t\t\x3c/div\x3e'+('\t\t\t\t\t\x3cdiv id\x3d"advance_query_list_'+a.option.id+'" class\x3d"panel-collapse collapse list-group in" style\x3d"min-height:120px;"\x3e\x3c/div\x3e');c=c+'\t\t\t\t\x3c/div\x3e\t\t\t\x3c/div\x3e\t\t\x3c/div\x3e\t\x3cdiv class\x3d"col-lg-9 col-md-9 col-sm-9"\x3e\t\x3cul class\x3d"nav nav-tabs" role\x3d"tablist"\x3e'+('\t\t\x3cli\x3e\x3ca href\x3d"#advance_query_plan_'+a.option.id+'" role\x3d"tab" data-toggle\x3d"tab"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.title+"\x3c/a\x3e\x3c/li\x3e");c+='\t\t\x3cli class\x3d"active"\x3e\x3ca href\x3d"#advance_query_condition_'+a.option.id+'" role\x3d"tab" data-toggle\x3d"tab"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.title+"\x3c/a\x3e\x3c/li\x3e";c+='\t\t\x3cli\x3e\x3ca href\x3d"#advance_query_sort_'+a.option.id+'" role\x3d"tab" data-toggle\x3d"tab"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.title+"\x3c/a\x3e\x3c/li\x3e";c=c+'\t\x3c/ul\x3e\t\x3cdiv class\x3d"tab-content"\x3e'+('\t\t\x3cdiv class\x3d"tab-pane" id\x3d"advance_query_plan_'+a.option.id+'"\x3e');c=c+'\t\t\t\x3cdiv class\x3d"panel panel-default"\x3e'+('\t\t\t\t\x3cinput type\x3d"hidden" id\x3d"advance_query_id_'+a.option.id+'" name\x3d"advance_query_id_'+a.option.id+'" /\x3e');c=c+'\t\t\t\t\x3cdiv class\x3d"form-horizontal" style\x3d"padding:10px;"\x3e\t\t\t\t\t\x3cdiv class\x3d"form-group"\x3e'+('\t\t\t\t\t\t\x3clabel class\x3d"col-sm-3 control-label text-right"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.advanceQueryName+"\x3c/label\x3e");c=c+'\t\t\t\t\t\t\x3cdiv class\x3d"col-sm-6"\x3e'+('\t\t\t\t\t\t\t\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"advance_query_name_'+a.option.id+'" name\x3d"advance_query_name_'+a.option.id+'" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.advanceQueryNamePlaceHoder+'"\x3e');c=c+'\t\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3cdiv class\x3d"form-group"\x3e'+('\t\t\t\t\t\t\x3clabel class\x3d"col-sm-3 control-label text-right"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.remark+"\x3c/label\x3e");c=c+'\t\t\t\t\t\t\x3cdiv class\x3d"col-sm-6"\x3e'+('\t\t\t\t\t\t\t\x3ctextarea id\x3d"remark_'+a.option.id+'" name\x3d"remark_'+a.option.id+'" class\x3d"form-control" placeholder\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.remarkPlaceHoder+'"\x3e\x3c/textarea\x3e');c=c+'\t\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3cdiv class\x3d"form-group"\x3e\t\t\t\t\t\t\x3cdiv class\x3d"col-sm-offset-3 col-sm-12"\x3e'+('\t\t\t\t\t\t\t\x3cbutton id\x3d"add_advance_query_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.addAdvanceQueryTitle+'" class\x3d"btn btn-primary"\x3e');c+="\t\t\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.addAdvanceQuery;c=c+"\t\t\t\t\t\t\t\x3c/button\x3e"+('\t\t\t\t\t\t\t\x3cbutton id\x3d"edit_advance_query_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.editAdvanceQueryTitle+'" class\x3d"btn btn-primary"\x3e');c+="\t\t\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.editAdvanceQuery;c=c+"\t\t\t\t\t\t\t\x3c/button\x3e"+('\t\t\t\t\t\t\t\x3cbutton id\x3d"copy_advance_query_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.copyAdvanceQueryTitle+'" class\x3d"btn btn-warning"\x3e');c+="\t\t\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.copyAdvanceQuery;c=c+"\t\t\t\t\t\t\t\x3c/button\x3e"+('\t\t\t\t\t\t\t\x3cbutton id\x3d"delete_advance_query_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.deleteAdvanceQueryTitle+'" class\x3d"btn btn-danger"\x3e');c+="\t\t\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.plan.buttons.deleteAdvanceQuery;c=c+"\t\t\t\t\t\t\t\x3c/button\x3e\t\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\x3c/div\x3e\t\t\t\x3c/div\x3e\t\t\x3c/div\x3e"+('\t\t\x3cdiv class\x3d"tab-pane active" id\x3d"advance_query_condition_'+a.option.id+'"\x3e');c=c+'\t\t\t\x3cdiv class\x3d"panel panel-default"\x3e\t\t\t\t\x3cdiv class\x3d"form-horizontal text-right advance-query-buttons"\x3e'+('\t\t\t\t\t\x3cbutton id\x3d"insert_condition_tr_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.buttons.insertTitle+'" class\x3d"btn btn-primary"\x3e');c+="\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.buttons.insert;c=c+"\t\t\t\t\t\x3c/button\x3e"+('\t\t\t\t\t\x3cbutton id\x3d"clear_condition_tr_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.buttons.clearTitle+'" class\x3d"btn btn-danger"\x3e');c+="\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.buttons.clear;c=c+'\t\t\t\t\t\x3c/button\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"advance-query-table-container"\x3e'+('\t\t\t\t\t\x3ctable id\x3d"condition_table_'+a.option.id+'" class\x3d"table table-bordered table-striped table-hover table-condition table-center" style\x3d"min-width:800px"\x3e');c=c+"\t\t\t\t\t\t\x3ctr\x3e"+('\t\t\t\t\t\t\t\x3cth style\x3d"width:50px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.sequence+"\x3c/th\x3e");c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:100px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.operation+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:80px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.leftParentheses+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:140px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.field+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:120px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.condition+"\x3c/th\x3e";c+="\t\t\t\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.value+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:80px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.rightParentheses+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:90px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.logic+"\x3c/th\x3e";c=c+'\t\t\t\t\t\t\x3c/tr\x3e\t\t\t\t\t\x3c/table\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\t\t\t\x3c/div\x3e\t\t\x3c/div\x3e'+('\t\t\x3cdiv class\x3d"tab-pane" id\x3d"advance_query_sort_'+a.option.id+'"\x3e');c=c+'\t\t\t\x3cdiv class\x3d"panel panel-default"\x3e\t\t\t\t\x3cdiv class\x3d"form-horizontal text-right advance-query-buttons"\x3e'+('\t\t\t\t\t\x3cbutton id\x3d"insert_sort_tr_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.buttons.insertTitle+'" class\x3d"btn btn-primary"\x3e');c+="\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.buttons.insert;c=c+"\t\t\t\t\t\x3c/button\x3e"+('\t\t\t\t\t\x3cbutton id\x3d"clear_sort_tr_'+a.option.id+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.buttons.clearTitle+'" class\x3d"btn btn-danger"\x3e');c+="\t\t\t\t\t\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.buttons.clear;c=c+'\t\t\t\t\t\x3c/button\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"advance-query-table-container"\x3e'+('\t\t\t\t\t\x3ctable id\x3d"sort_table_'+a.option.id+'" class\x3d"table table-bordered table-striped table-hover table-condition table-center" style\x3d"width:400px"\x3e');c=c+"\t\t\t\t\t\t\x3ctr\x3e"+('\t\t\t\t\t\t\t\x3cth style\x3d"width:50px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.sequence+"\x3c/th\x3e");c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:100px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.operation+"\x3c/th\x3e";c+="\t\t\t\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.field+"\x3c/th\x3e";c+='\t\t\t\t\t\t\t\x3cth style\x3d"width:80px;"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.logic+"\x3c/th\x3e";var d;d=""+('\x3cbutton type\x3d"button" class\x3d"btn btn-primary" id\x3d"do_advance_query_'+a.option.id+'"\x3e');d+="\t"+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.buttons.query;c=c+'\t\t\t\t\t\t\x3c/tr\x3e\t\t\t\t\t\x3c/table\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\t\t\t\x3c/div\x3e\t\t\x3c/div\x3e\t\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'+b.fn.dlshouwen.grid.tools.getWindowEnd(b.fn.dlshouwen.grid.lang[a.option.lang].buttons.close,d+"\x3c/button\x3e");b("body").append(c);a.loadAdvanceQueryList();b("#add_advance_query_"+a.option.id).click(function(){a.addAdvanceQuery()});b("#edit_advance_query_"+a.option.id).click(function(){a.editAdvanceQuery()});b("#copy_advance_query_"+a.option.id).click(function(){a.copyAdvanceQuery()});b("#delete_advance_query_"+a.option.id).click(function(){a.deleteAdvanceQuery()});b("#insert_condition_tr_"+a.option.id).click(function(){a.insertConditionTr()});b("#clear_condition_tr_"+a.option.id).click(function(){a.clearConditionTr()});b("#insert_sort_tr_"+a.option.id).click(function(){a.insertSortTr()});b("#clear_sort_tr_"+a.option.id).click(function(){a.clearSortTr()});b("#do_advance_query_"+a.option.id).click(function(){a.doAdvanceQuery()});b("#advance_query_"+a.option.id+"_modal").modal("show");a.init.advanceQueryWindowIsInit=!0}},loadAdvanceQueryList:function(){var a=this,c=path+"/core/base/extra/advance_query/list",d={};d.functionCode=a.option.functionCode;sw.ajaxSubmit(c,d,function(c){for(var g="",d=0;d<c.length;d++)var k=c[d],g=g+('\x3ca id\x3d"advance_query_'+a.option.id+"_"+k.advance_query_id+'" class\x3d"list-group-item" href\x3d"javascript:void(0);"\x3e'),g=g+('\t\x3ci class\x3d"fa fa-file-text-o"\x3e\x3c/i\x3e'+k.advance_query_name),g=g+"\x3c/a\x3e";b("#advance_query_list_"+a.option.id).html(g);b("a[id*\x3dadvance_query_"+a.option.id+"_]").click(function(){var b=this.id.replace("advance_query_"+a.option.id+"_","");a.loadAdvanceQueryDeatil(b)})})},loadAdvanceQueryDeatil:function(a){var c=this;c.clearConditionTr();c.clearSortTr();var d=path+"/core/base/extra/advance_query/info/data",e={};e.advanceQueryId=a;sw.ajaxSubmit(d,e,function(a){b("#advance_query_id_"+c.option.id).val(a.advance_query_id);b("#advance_query_name_"+c.option.id).val(a.advance_query_name);b("#remark_"+c.option.id).val(a.remark);for(var d=a.advanceQueryConditionList,e=0;e<d.length;e++){var f=d[e].data_type,q=d[e].left_parentheses,m=d[e].condition_field,l=d[e].condition_type,n=d[e].condition_value,p=d[e].right_parentheses,u=d[e].logic,t=c.insertConditionTr();b("#data_type"+c.option.id+"_"+t).val(f);b("#left_parentheses_"+c.option.id+"_"+t).val(q);b("#condition_field_"+c.option.id+"_"+t).val(m);b("#condition_field_"+c.option.id+"_"+t).change();b("#condition_type_"+c.option.id+"_"+t).val(l);b("#condition_value_"+c.option.id+"_"+t).val(n);b("#right_parentheses_"+c.option.id+"_"+t).val(p);b("#logic_"+c.option.id+"_"+t).val(u)}a=a.advanceQuerySortList;for(e=0;e<a.length;e++)d=a[e].sort_field,f=a[e].sort_logic,q=c.insertSortTr(),b("#sort_field_"+c.option.id+"_"+q).val(d),b("#sort_logic_"+c.option.id+"_"+q).val(f)})},addAdvanceQuery:function(){var a=this,c=b("#advance_query_name_"+a.option.id).val();if(""==c.trim())b.fn.dlshouwen.grid.tools.toast("\u65b9\u6848\u540d\u79f0\u5fc5\u987b\u586b\u5199\u3002","warning",3E3),b("#advance_query_name_"+a.option.id).focus();else if(40<c.lengthb)b.fn.dlshouwen.grid.tools.toast("\u65b9\u6848\u540d\u79f0\u7684\u957f\u5ea6\u4ec5\u965040\u4e2a\u5b57\u7b26\u3002","warning",3E3),b("#advance_query_name_"+a.option.id).focus();else{var d={};d.advance_query_name=c;d.function_code=a.option.functionCode;d.remark=b("#remark_"+a.option.id).val();var e=[],g=!0;b("#condition_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var c=this.id.replace("tr_"+a.option.id+"_",""),f=b("#seq_td_"+a.option.id+"_"+c).html(),d=b("#data_type_"+a.option.id+"_"+c).val(),h=b("#left_parentheses_"+a.option.id+"_"+c).val(),l=b("#condition_field_"+a.option.id+"_"+c).val(),n=b("#condition_type_"+a.option.id+"_"+c).val(),p=b("#condition_value_"+a.option.id+"_"+c).val(),u=b("#right_parentheses_"+a.option.id+"_"+c).val(),c=b("#logic_"+a.option.id+"_"+c).val();if(""==l)return b.fn.dlshouwen.grid.tools.toast("\u67e5\u8be2\u6761\u4ef6\u4e2d\u7b2c"+f+"\u884c\u7684\u5b57\u6bb5\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),g=!1;if(""==n)return b.fn.dlshouwen.grid.tools.toast("\u67e5\u8be2\u6761\u4ef6\u4e2d\u7b2c"+f+"\u884c\u7684\u6761\u4ef6\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),g=!1;f={};f.data_type=d;f.left_parentheses=h;f.condition_field=l;f.condition_type=n;f.condition_value=p;f.right_parentheses=u;f.logic=c;e.push(f)});if(g){d.advanceQueryConditionList=e;var h=[],g=!0;b("#sort_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var c=this.id.replace("tr_"+a.option.id+"_",""),f=b("#seq_td_"+a.option.id+"_"+c).html(),d=b("#sort_field_"+a.option.id+"_"+c).val(),c=b("#sort_logic_"+a.option.id+"_"+c).val();if(""==d)return b.fn.dlshouwen.grid.tools.toast("\u6392\u5e8f\u6761\u4ef6\u4e2d\u7b2c"+f+"\u884c\u7684\u5b57\u6bb5\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),g=!1;if(""==c)return b.fn.dlshouwen.grid.tools.toast("\u6392\u5e8f\u6761\u4ef6\u4e2d\u7b2c"+f+"\u884c\u7684\u6392\u5e8f\u903b\u8f91\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),g=!1;f={};f.sort_field=d;f.sort_logic=c;h.push(f)});g&&(d.advanceQuerySortList=h,confirm("\u60a8\u786e\u5b9a\u65b0\u589e\u6b64\u67e5\u8be2\u65b9\u6848\uff1f")&&sw.ajaxSubmitJSON(path+"/core/base/extra/advance_query/add",d,function(b){sw.ajaxSuccessCallback(b,function(){a.loadAdvanceQueryList()})}))}}},editAdvanceQuery:function(){var a=this,c=b("#advance_query_id_"+a.option.id).val();if(""==c.trim())b.fn.dlshouwen.grid.tools.toast("\u60a8\u672a\u9009\u62e9\u4efb\u4f55\u65b9\u6848\uff0c\u65e0\u6cd5\u6267\u884c\u7f16\u8f91\u64cd\u4f5c\u3002","warning",3E3);else{var d=b("#advance_query_name_"+a.option.id).val();if(""==d.trim())b.fn.dlshouwen.grid.tools.toast("\u65b9\u6848\u540d\u79f0\u5fc5\u987b\u586b\u5199\u3002","warning",3E3),b("#advance_query_name_"+a.option.id).focus();else if(40<d.lengthb)b.fn.dlshouwen.grid.tools.toast("\u65b9\u6848\u540d\u79f0\u7684\u957f\u5ea6\u4ec5\u965040\u4e2a\u5b57\u7b26\u3002","warning",3E3),b("#advance_query_name_"+a.option.id).focus();else{var e={};e.advance_query_id=c;e.advance_query_name=d;e.function_code=a.option.functionCode;e.remark=b("#remark_"+a.option.id).val();var g=[],h=!0;b("#condition_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var c=this.id.replace("tr_"+a.option.id+"_",""),d=b("#seq_td_"+a.option.id+"_"+c).html(),e=b("#data_type_"+a.option.id+"_"+c).val(),k=b("#left_parentheses_"+a.option.id+"_"+c).val(),l=b("#condition_field_"+a.option.id+"_"+c).val(),n=b("#condition_type_"+a.option.id+"_"+c).val(),p=b("#condition_value_"+a.option.id+"_"+c).val(),t=b("#right_parentheses_"+a.option.id+"_"+c).val(),c=b("#logic_"+a.option.id+"_"+c).val();if(""==l)return b.fn.dlshouwen.grid.tools.toast("\u67e5\u8be2\u6761\u4ef6\u4e2d\u7b2c"+d+"\u884c\u7684\u5b57\u6bb5\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),h=!1;if(""==n)return b.fn.dlshouwen.grid.tools.toast("\u67e5\u8be2\u6761\u4ef6\u4e2d\u7b2c"+d+"\u884c\u7684\u6761\u4ef6\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),h=!1;d={};d.data_type=e;d.left_parentheses=k;d.condition_field=l;d.condition_type=n;d.condition_value=p;d.right_parentheses=t;d.logic=c;g.push(d)});if(h){e.advanceQueryConditionList=g;var k=[],h=!0;b("#sort_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var c=this.id.replace("tr_"+a.option.id+"_",""),d=b("#seq_td_"+a.option.id+"_"+c).html(),g=b("#sort_field_"+a.option.id+"_"+c).val(),c=b("#sort_logic_"+a.option.id+"_"+c).val();if(""==g)return b.fn.dlshouwen.grid.tools.toast("\u6392\u5e8f\u6761\u4ef6\u4e2d\u7b2c"+d+"\u884c\u7684\u5b57\u6bb5\u4fe1\u606f\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),h=!1;if(""==c)return b.fn.dlshouwen.grid.tools.toast("\u6392\u5e8f\u6761\u4ef6\u4e2d\u7b2c"+d+"\u884c\u7684\u6392\u5e8f\u903b\u8f91\u5fc5\u987b\u9009\u62e9\uff01","warning",3E3),h=!1;d={};d.sort_field=g;d.sort_logic=c;k.push(d)});h&&(e.advanceQuerySortList=k,confirm("\u60a8\u786e\u5b9a\u7f16\u8f91\u6b64\u67e5\u8be2\u65b9\u6848\uff1f")&&sw.ajaxSubmitJSON(path+"/core/base/extra/advance_query/edit",e,function(b){sw.ajaxSuccessCallback(b,function(){a.loadAdvanceQueryList()})}))}}}},deleteAdvanceQuery:function(){var a=this,c=b("#advance_query_id_"+a.option.id).val();if(""==c.trim())b.fn.dlshouwen.grid.tools.toast("\u60a8\u672a\u9009\u62e9\u4efb\u4f55\u65b9\u6848\uff0c\u65e0\u6cd5\u6267\u884c\u5220\u9664\u64cd\u4f5c\u3002","warning",3E3);else if(confirm("\u60a8\u786e\u5b9a\u5220\u9664\u6b64\u67e5\u8be2\u65b9\u6848\uff1f")){var d=path+"/core/base/extra/advance_query/delete",e={};e.advanceQueryId=c;sw.ajaxSubmit(d,e,function(c){sw.ajaxSuccessCallback(c,function(){b("#advance_query_id_"+a.option.id).val("");b("#advance_query_name_"+a.option.id).val("");b("#remark_"+a.option.id).val("");a.loadAdvanceQueryList()})})}},copyAdvanceQuery:function(){var a=this,c=b("#advance_query_id_"+a.option.id).val();if(""==c.trim())b.fn.dlshouwen.grid.tools.toast("\u60a8\u672a\u9009\u62e9\u4efb\u4f55\u65b9\u6848\uff0c\u65e0\u6cd5\u6267\u884c\u590d\u5236\u64cd\u4f5c\u3002","warning",3E3);else if(confirm("\u60a8\u786e\u5b9a\u590d\u5236\u6b64\u67e5\u8be2\u65b9\u6848\uff1f")){var d=path+"/core/base/extra/advance_query/copy",e={};e.advanceQueryId=c;sw.ajaxSubmit(d,e,function(b){sw.ajaxSuccessCallback(b,function(){a.loadAdvanceQueryList()})})}},doAdvanceQuery:function(){var a=this,c=!0,d=[];b("#condition_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var g=this.id.replace("tr_"+a.option.id+"_",""),e=b("#condition_table_"+a.option.id+" #seq_td_"+a.option.id+"_"+g).html(),k=b("#condition_table_"+a.option.id+" #left_parentheses_"+a.option.id+"_"+g).val(),f=b("#condition_table_"+a.option.id+" #condition_field_"+a.option.id+"_"+g).val(),l=b("#condition_table_"+a.option.id+" #condition_type_"+a.option.id+"_"+g).val(),m=b("#condition_table_"+a.option.id+" #condition_value_"+a.option.id+"_"+g).val(),n=b("#condition_table_"+a.option.id+" #right_parentheses_"+a.option.id+"_"+g).val(),p=b("#condition_table_"+a.option.id+" #logic_"+a.option.id+"_"+g).val();if(""==f)return b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.errors.fieldMustSelect,"{sequence}",e),"warning",3E3),c=!1;if(""==l)return b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.errors.conditionMustSelect,"{sequence}",e),"warning",3E3),c=!1;var r={};r.id=g;r.seq=e;r.left_parentheses=k;r.condition_field=f;r.condition_type=l;r.condition_value=m;r.right_parentheses=n;r.logic=p;d.push(r)});var e=[];b("#sort_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var d=this.id.replace("tr_"+a.option.id+"_",""),h=b("#sort_table_"+a.option.id+" #seq_td_"+a.option.id+"_"+d).html(),k=b("#sort_table_"+a.option.id+" #sort_field_"+a.option.id+"_"+d).val(),d=b("#sort_table_"+a.option.id+" #sort_logic_"+a.option.id+"_"+d).val();if(""==k)return b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.errors.fieldMustSelect,"{sequence}",h),"warning",3E3),c=!1;if(""==d)return b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.tools.replaceAll(b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.errors.logicMustSelect,"{sequence}",h),"warning",3E3),c=!1;h={};h.sort_field=k;h.sort_logic=d;e.push(h)});c&&(a.advanceQueryParameter={},a.advanceQueryParameter.advanceQueryConditions=d,a.advanceQueryParameter.advanceQuerySorts=e,a.load(),b("#advance_query_"+a.option.id+"_modal").modal("hide"))},doAdvanceQueryDatasFilter:function(a,c){for(var d=[],e=0;e<a.length;e++){var g=a[e];if(c.advanceQueryConditions&&0<c.advanceQueryConditions.length){for(var h="",k=0;k<c.advanceQueryConditions.length;k++){var f=c.advanceQueryConditions[k],h=h+f.leftParentheses;"0"==f.condition&&(h+='record["'+f.condition_field+'"]\x3d\x3d"'+f.condition_value+'"');"1"==f.condition&&(h+='record["'+f.condition_field+'"]!\x3d"'+f.condition_value+'"');"2"==f.condition&&(h+='record["'+f.condition_field+'"].indexOf("'+f.condition_value+'")!\x3d-1');"3"==f.condition&&(h+='$.fn.dlshouwen.grid.tools.startsWith(record["'+f.condition_field+'"], "'+f.condition_value+'")');"4"==f.condition&&(h+='$.fn.dlshouwen.grid.tools.endsWith(record["'+f.condition_field+'"], "'+f.condition_value+'")');if("5"==f.condition){var l=g[f.condition_field];l instanceof Date&&(h+='(record["'+f.condition_field+'"].getTime()-$.fn.dlshouwen.grid.tools.toDate("'+f.condition_value+'", "'+f.format+'").getTime())\x3e0');l instanceof Date||isNaN(l)||(h+='(parseFloat(record["'+f.condition_field+'"]) - parseFloat("'+f.condition_value+'"))\x3e0');l instanceof Date||!isNaN(l)||(h+='record["'+f.condition_field+'"].localeCompare("'+f.condition_value+'")\x3e0')}"6"==f.condition&&(l=g[f.condition_field],l instanceof Date&&(h+='(record["'+f.condition_field+'"].getTime()-$.fn.dlshouwen.grid.tools.toDate("'+f.condition_value+'", "'+f.format+'").getTime())\x3e\x3d0'),l instanceof Date||isNaN(l)||(h+='(parseFloat(record["'+f.condition_field+'"]) - parseFloat("'+f.condition_value+'"))\x3e\x3d0'),l instanceof Date||!isNaN(l)||(h+='record["'+f.condition_field+'"].localeCompare("'+f.condition_value+'")\x3e\x3d0'));"7"==f.condition&&(l=g[f.condition_field],l instanceof Date&&(h+='(record["'+f.condition_field+'"].getTime()-$.fn.dlshouwen.grid.tools.toDate("'+f.condition_value+'", "'+f.format+'").getTime())\x3c0'),l instanceof Date||isNaN(l)||(h+='(parseFloat(record["'+f.condition_field+'"]) - parseFloat("'+f.condition_value+'"))\x3c0'),l instanceof Date||!isNaN(l)||(h+='record["'+f.condition_field+'"].localeCompare("'+f.condition_value+'")\x3c0'));"8"==f.condition&&(l=g[f.condition_field],l instanceof Date&&(h+='(record["'+f.condition_field+'"].getTime()-$.fn.dlshouwen.grid.tools.toDate("'+f.condition_value+'", "'+f.format+'").getTime())\x3c\x3d0'),l instanceof Date||isNaN(l)||(h+='(parseFloat(record["'+f.condition_field+'"]) - parseFloat("'+f.condition_value+'"))\x3c\x3d0'),l instanceof Date||!isNaN(l)||(h+='record["'+f.condition_field+'"].localeCompare("'+f.condition_value+'")\x3c\x3d0'));"9"==f.condition&&(h+='!record["'+f.condition_field+'"]');"10"==f.condition&&(h+='record["'+f.condition_field+'"]');h+=f.right_parentheses;"0"==f.logic&&(h+="\x26\x26");"1"==f.logic&&(h+="||")}try{eval(h)&&d.push(g)}catch(m){return b.fn.dlshouwen.grid.tools.toast(b.fn.dlshouwen.grid.lang[gridReflectionObj.option.lang].advanceQuery.condition.errors.conditionError,"error",3E3),a}}else d.push(g)}c.advanceQuerySorts&&0<c.advanceQuerySorts.length&&(d=d.sort(function(a,b){for(var d=0;d<c.advanceQuerySorts.length;d++){var f=c.advanceQuerySorts[d],e=a[f.sort_field],g=b[f.sort_field];if(e!=g){if(!isNaN(e)&&!isNaN(g)){if("0"==f.sort_logic)return e-g;if("1"==f.sort_logic)return g-e}if(e instanceof Date&&g instanceof Date){if("0"==f.sort_logic)return e.getTime()-g.getTime();if("1"==f.sort_logic)return g.getTime()-e.getTime()}if(null!=e&&"0"==f.sort_logic)return e.localeCompare(g);if(null!=g&&"1"==f.sort_logic)return g.localeCompare(e)}}return 0}));return d},sequenceCondition:0,insertConditionTr:function(){var a=this,c;c=""+('\x3ctr id\x3d"tr_'+a.option.id+"_"+a.sequenceCondition+'"\x3e');c+='\t\x3ctd id\x3d"seq_td_'+a.option.id+"_"+a.sequenceCondition+'"\x3e\x3c/td\x3e';c=c+"\t\x3ctd\x3e"+('\t\t\x3cbutton type\x3d"button" id\x3d"move_up_condition_tr_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"btn btn-xs btn-primary btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons.upTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons.up+"\x3c/button\x3e");c+='\t\t\x3cbutton type\x3d"button" id\x3d"move_down_condition_tr_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"btn btn-xs btn-primary btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons.downTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons.down+"\x3c/button\x3e";c+='\t\t\x3cbutton type\x3d"button" id\x3d"delete_condition_tr_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"btn btn-xs btn-danger btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons.deleteTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.condition.table.buttons["delete"]+"\x3c/button\x3e";c+='\t\t\x3cinput type\x3d"hidden" id\x3d"data_type_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"data_type_'+a.option.id+"_"+a.sequenceCondition+'" /\x3e';c=c+"\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cinput type\x3d"text" id\x3d"left_parentheses_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"left_parentheses_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"form-control" /\x3e');c=c+"\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cselect id\x3d"condition_field_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"condition_field_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"form-control"\x3e');c+='\t\t\t\x3coption value\x3d""\x3e\x3c/option\x3e';for(var d=0;d<a.option.columns.length;d++){var e=a.option.columns[d];0!=e.advanceQuery&&(c+='\t\x3coption value\x3d"'+e.id+'"\x3e'+e.title+"\x3c/option\x3e")}c=c+"\t\t\x3c/select\x3e\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cselect id\x3d"condition_type_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"condition_type_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"form-control"\x3e');c=c+'\t\t\t\x3coption value\x3d""\x3e\x3c/option\x3e\t\t\t\x3coption value\x3d"0"\x3e\x3d\x3c/option\x3e\t\t\t\x3coption value\x3d"1"\x3e!\x3d\x3c/option\x3e\t\t\t\x3coption value\x3d"2"\x3elike\x3c/option\x3e\t\t\t\x3coption value\x3d"3"\x3estart with\x3c/option\x3e\t\t\t\x3coption value\x3d"4"\x3eend with\x3c/option\x3e\t\t\t\x3coption value\x3d"5"\x3e\x26gt;\x3c/option\x3e\t\t\t\x3coption value\x3d"6"\x3e\x26gt;\x3d\x3c/option\x3e\t\t\t\x3coption value\x3d"7"\x3e\x26lt;\x3c/option\x3e\t\t\t\x3coption value\x3d"8"\x3e\x26lt;\x3d\x3c/option\x3e\t\t\t\x3coption value\x3d"9"\x3eis null\x3c/option\x3e\t\t\t\x3coption value\x3d"10"\x3eis not null\x3c/option\x3e\t\t\x3c/select\x3e\t\x3c/td\x3e'+('\t\x3ctd id\x3d"condition_value_td_'+a.option.id+"_"+a.sequenceCondition+'"\x3e\x3c/td\x3e');c=c+"\t\x3ctd\x3e"+('\t\t\x3cinput type\x3d"text" id\x3d"right_parentheses_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"right_parentheses_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"form-control" /\x3e');c=c+"\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cselect id\x3d"logic_'+a.option.id+"_"+a.sequenceCondition+'" name\x3d"logic_'+a.option.id+"_"+a.sequenceCondition+'" class\x3d"form-control"\x3e');c+='\t\t\t\x3coption value\x3d""\x3e\x3c/option\x3e\t\t\t\x3coption value\x3d"0"\x3eand\x3c/option\x3e\t\t\t\x3coption value\x3d"1"\x3eor\x3c/option\x3e\t\t\x3c/select\x3e\t\x3c/td\x3e\x3c/tr\x3e';b("#condition_table_"+a.option.id).append(c);b("#move_up_condition_tr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.replace("move_up_condition_tr_"+a.option.id+"_","");a.moveUpConditionTr(b)});b("#move_down_condition_tr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.replace("move_down_condition_tr_"+a.option.id+"_","");a.moveDownConditionTr(b)});b("#delete_condition_tr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.replace("delete_condition_tr_"+a.option.id+"_","");a.deleteConditionTr(b)});b("#left_parentheses_"+a.option.id+"_"+a.sequenceCondition).keyup(function(){var b=this.id.replace("left_parentheses_"+a.option.id+"_","");a.validLeftParentheses(b)});b("#condition_field_"+a.option.id+"_"+a.sequenceCondition).change(function(){var b=this.id.replace("condition_field_"+a.option.id+"_","");a.fieldChange(b)});b("#condition_type_"+a.option.id+"_"+a.sequenceCondition).change(function(){var b=this.id.replace("condition_type_"+a.option.id+"_","");a.conditionChange(b)});b("#right_parentheses_"+a.option.id+"_"+a.sequenceCondition).keyup(function(){var b=this.id.replace("right_parentheses_"+a.option.id+"_","");a.validRightParentheses(b)});c=a.sequenceCondition;a.sequenceCondition++;a.resetConditionSeq();return c},clearConditionTr:function(){b("#condition_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").remove()},resetConditionSeq:function(){var a=this,c=1;b("#condition_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var d=this.id.split("_")[2];b("#condition_table_"+a.option.id+" #seq_td_"+a.option.id+"_"+d).html(c);c++})},moveUpConditionTr:function(a){b("#condition_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).prev("#condition_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").before(b("#condition_table_"+this.option.id+" #tr_"+this.option.id+"_"+a));this.resetConditionSeq()},moveDownConditionTr:function(a){b("#condition_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).next("#condition_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").after(b("#condition_table_"+this.option.id+" #tr_"+this.option.id+"_"+a));this.resetConditionSeq()},deleteConditionTr:function(a){b("#condition_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).remove();this.resetConditionSeq()},validLeftParentheses:function(a){var c=b("#left_parentheses_"+this.option.id+"_"+a).val();c.match(/^[\(]*$/g)||(c=b.fn.dlshouwen.grid.tools.replaceAll(c,"\uff08","("),c=c.replace(/[^\(]/g,""),b("#left_parentheses_"+this.option.id+"_"+a).val(c))},fieldChange:function(a){var c=b("#condition_field_"+this.option.id+"_"+a).val(),d=b("#condition_value_"+this.option.id+"_"+a).val();if(""==c||"9"==d||"10"==d)b("#condition_value_td_"+this.option.id+"_"+a).html("");else{for(var d={},e=0;e<this.option.columns.length;e++)if(this.option.columns[e].id==c&&0!=this.option.columns[e].advanceQuery){d=this.option.columns[e];break}b("#data_type_"+this.option.id+"_"+a).val(d.type);if("date"==d.type)c='\x3cdiv class\x3d"input-group"\x3e'+('\t\x3cinput id\x3d"condition_value_'+this.option.id+"_"+a+'" name\x3d"condition_value_'+this.option.id+"_"+a+'" class\x3d"form-control" onclick\x3d"WdatePicker({dateFmt:\''+b.fn.dlshouwen.grid.tools.replaceAll(d.format,"h","H")+"'})\" /\x3e"),c+='\t\x3cdiv class\x3d"input-group-addon"\x3e\x3ci class\x3d"fa fa-calendar"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e';else if(d.codeTable){var c=""+('\x3cselect id\x3d"condition_value_'+this.option.id+"_"+a+'" name\x3d"condition_value_'+this.option.id+"_"+a+'" class\x3d"form-control"\x3e'),c=c+'\t\x3coption value\x3d""\x3e\x3c/option\x3e',g;for(g in d.codeTable)c+='\x3coption value\x3d"'+g+'"\x3e'+d.codeTable[g]+"\x3c/option\x3e";c+="\x3c/select\x3e"}else c='\x3cinput id\x3d"condition_value_'+this.option.id+"_"+a+'" name\x3d"condition_value_'+this.option.id+"_"+a+'" class\x3d"form-control" /\x3e';b("#condition_value_td_"+this.option.id+"_"+a).html(c)}},conditionChange:function(a){var c=b("#condition_type_"+this.option.id+"_"+a).val();"9"==c||"10"==c?b("#condition_value_td_"+this.option.id+"_"+a).html(""):""==b("#condition_value_td_"+this.option.id+"_"+a).html()&&this.fieldChange(a)},validRightParentheses:function(a){var c=b("#right_parentheses_"+this.option.id+"_"+a).val();c.match(/^[\(]*$/g)||(c=b.fn.dlshouwen.grid.tools.replaceAll(c,"\uff09",")"),c=c.replace(/[^\)]/g,""),b("#right_parentheses_"+this.option.id+"_"+a).val(c))},sequenceSort:0,insertSortTr:function(){var a=this,c;c=""+('\x3ctr id\x3d"tr_'+a.option.id+"_"+a.sequenceSort+'"\x3e');c+='\t\x3ctd id\x3d"seq_td_'+a.option.id+"_"+a.sequenceSort+'"\x3e\x3c/td\x3e';c=c+"\t\x3ctd\x3e"+('\t\t\x3cbutton type\x3d"button" id\x3d"move_up_sort_tr_'+a.option.id+"_"+a.sequenceSort+'" class\x3d"btn btn-xs btn-primary btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons.upTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons.up+"\x3c/button\x3e");c+='\t\t\x3cbutton type\x3d"button" id\x3d"move_down_sort_tr_'+a.option.id+"_"+a.sequenceSort+'" class\x3d"btn btn-xs btn-primary btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons.downTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons.down+"\x3c/button\x3e";c+='\t\t\x3cbutton type\x3d"button" id\x3d"delete_sort_tr_'+a.option.id+"_"+a.sequenceSort+'" class\x3d"btn btn-xs btn-danger btn-icon" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons.deleteTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.table.buttons["delete"]+"\x3c/button\x3e";c=c+"\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cselect id\x3d"sort_field_'+a.option.id+"_"+a.sequenceSort+'" name\x3d"sort_field_'+a.option.id+"_"+a.sequenceSort+'" class\x3d"form-control"\x3e');c+='\t\t\t\x3coption value\x3d""\x3e\x3c/option\x3e';for(var d=0;d<a.option.columns.length;d++){var e=a.option.columns[d];0!=e.advanceQuery&&(c+='\t\x3coption value\x3d"'+e.id+'"\x3e'+e.title+"\x3c/option\x3e")}c=c+"\t\t\x3c/select\x3e\t\x3c/td\x3e\t\x3ctd\x3e"+('\t\t\x3cselect id\x3d"sort_logic_'+a.option.id+"_"+a.sequenceSort+'" name\x3d"sort_logic_'+a.option.id+"_"+a.sequenceSort+'" class\x3d"form-control"\x3e');c=c+'\t\t\t\x3coption value\x3d""\x3e\x3c/option\x3e'+('\t\t\t\x3coption value\x3d"0"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.logic.asc+"\x3c/option\x3e");c+='\t\t\t\x3coption value\x3d"1"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].advanceQuery.sort.logic.desc+"\x3c/option\x3e";c+="\t\t\x3c/select\x3e\t\x3c/td\x3e\x3c/tr\x3e";b("#sort_table_"+a.option.id).append(c);b("#move_up_sort_tr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.replace("move_up_sort_tr_"+a.option.id+"_","");a.moveUpSortTr(b)});b("#move_down_sort_tr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.replace("move_down_sort_tr_"+a.option.id+"_","");a.moveDownSortTr(b)});b("#delete_sort_tr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.replace("delete_sort_tr_"+a.option.id+"_","");a.deleteSortTr(b)});c=a.sequenceSort;a.sequenceSort++;a.resetSortSeq();return c},clearSortTr:function(){b("#sort_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").remove()},resetSortSeq:function(){var a=this,c=1;b("#sort_table_"+a.option.id+" tr[id*\x3dtr_"+a.option.id+"_]").each(function(){var d=this.id.replace("tr_"+a.option.id+"_","");b("#sort_table_"+a.option.id+" #seq_td_"+a.option.id+"_"+d).html(c);c++})},moveUpSortTr:function(a){b("#sort_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).prev("#sort_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").before(b("#sort_table_"+this.option.id+" #tr_"+this.option.id+"_"+a));this.resetSortSeq()},moveDownSortTr:function(a){b("#sort_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).next("#sort_table_"+this.option.id+" tr[id*\x3dtr_"+this.option.id+"_]").after(b("#sort_table_"+this.option.id+" #tr_"+this.option.id+"_"+a));this.resetSortSeq()},deleteSortTr:function(a){b("#sort_table_"+this.option.id+" #tr_"+this.option.id+"_"+a).remove();this.resetSortSeq()},print:function(){var a=this;if(a.init.printWindowIsInit)b("#dlshouwen_grid_print_"+a.option.id+"_modal").modal("show");else{var c;c=""+b.fn.dlshouwen.grid.tools.getWindowStart("dlshouwen_grid_print_"+a.option.id,b.fn.dlshouwen.grid.lang[a.option.lang].print.title);c=c+'\x3cdiv class\x3d"modal-body"\x3e\t\x3ctable class\x3d"table table-bordered table-print"\x3e\t\t\x3cthead\x3e\t\t\t\x3ctr\x3e'+('\t\t\t\t\x3cth\x3e\x3cinput type\x3d"checkbox" id\x3d"dlshouwen_grid_print_check_'+a.option.id+'" checked\x3d"checked" /\x3e\x3c/th\x3e');c+="\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.column+"\x3c/th\x3e";c+="\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.operation+"\x3c/th\x3e";c+="\t\t\t\x3c/tr\x3e\t\t\x3c/thead\x3e\t\t\x3ctbody\x3e";for(var d=0;d<a.option.columns.length;d++){var e=a.option.columns[d];0!=e.print&&(c+='\t\t\x3ctr id\x3d"dlshouwen_grid_print_tr_'+a.option.id+"_"+d+'"\x3e',c+='\t\t\t\x3ctd\x3e\x3cinput type\x3d"checkbox" id\x3d"dlshouwen_grid_print_check_'+a.option.id+"_"+d+'" checked\x3d"checked" value\x3d"'+d+'" /\x3e\x3c/td\x3e',c+="\t\t\t\x3ctd\x3e"+e.title+"\x3c/td\x3e",c+="\t\t\t\x3ctd\x3e",c+='\t\t\t\t\x3cbutton type\x3d"button" class\x3d"btn btn-xs btn-default" dataId\x3d"'+d+'" id\x3d"dlshouwen_grid_print_up_'+a.option.id+"_"+d+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.buttons.upTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.buttons.up+"\x3c/button\x3e",c+='\t\t\t\t\x3cbutton type\x3d"button" class\x3d"btn btn-xs btn-default" dataId\x3d"'+d+'" id\x3d"dlshouwen_grid_print_down_'+a.option.id+"_"+d+'" title\x3d"'+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.buttons.downTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[a.option.lang].print.table.buttons.down+"\x3c/button\x3e",c+="\t\t\t\x3c/td\x3e",c+="\t\t\x3c/tr\x3e")}d=""+('\x3cbutton type\x3d"button" class\x3d"btn btn-primary" id\x3d"dlshouwen_grid_print_execute_'+a.option.id+'"\x3e');d+="\t"+b.fn.dlshouwen.grid.lang[a.option.lang].print.buttons.print;c=c+"\t\t\x3c/tbody\x3e\t\x3c/table\x3e\x3c/div\x3e"+b.fn.dlshouwen.grid.tools.getWindowEnd(b.fn.dlshouwen.grid.lang[a.option.lang].buttons.close,d+"\x3c/button\x3e");b("body").append(c);b("#dlshouwen_grid_print_check_"+a.option.id).click(function(){b("input[id*\x3ddlshouwen_grid_print_check_"+a.option.id+"_]").attr("checked",this.checked)});b("button[id*\x3ddlshouwen_grid_print_up_"+a.option.id+"_]").click(function(){var c=b(this).attr("dataId"),d=a.option.id;b("#dlshouwen_grid_print_tr_"+d+"_"+c).prev("#dlshouwen_grid_print_"+d+"_modal tr[id*\x3ddlshouwen_grid_print_tr_"+d+"]").before(b("#dlshouwen_grid_print_tr_"+d+"_"+c))});b("button[id*\x3ddlshouwen_grid_print_down_"+a.option.id+"_]").click(function(){var c=b(this).attr("dataId"),d=a.option.id;b("#dlshouwen_grid_print_tr_"+d+"_"+c).next("#dlshouwen_grid_print_"+d+"_modal tr[id*\x3ddlshouwen_grid_print_tr_"+d+"]").after(b("#dlshouwen_grid_print_tr_"+d+"_"+c))});b("#dlshouwen_grid_print_execute_"+a.option.id).click(function(){var c="",c=c+('\x3ctable class\x3d"dlshouwen-grid '+a.option.tableClass+'" id\x3d"dlshouwen_grid_print_'+a.option.id+'" style\x3d"'+a.option.tableStyle+'"\x3e');0!=a.option.showHeader&&(c+="\x3cthead\x3e",c+="\t\x3ctr\x3e",b("input[id*\x3ddlshouwen_grid_print_check_"+a.option.id+"_]:checked").each(function(){var b=this.value;c+='\x3cth class\x3d"'+a.option.columns[b].headerClass+'" style\x3d"'+a.option.columns[b].headerStyle+'"\x3e'+a.option.columns[b].title+"\x3c/th\x3e"}),c+="\t\x3c/tr\x3e",c+="\x3c/thead\x3e");c+="\t\x3ctbody\x3e";if(null!=a.exhibitDatas)for(var d=0;d<a.exhibitDatas.length;d++)c+="\t\x3ctr\x3e",b("input[id*\x3ddlshouwen_grid_print_check_"+a.option.id+"_]:checked").each(function(){var b=this.value;c+='\t\x3ctd class\x3d"'+a.option.columns[b].columnClass+'" style\x3d"'+a.option.columns[b].columnStyle+'"\x3e';c=a.option.columns[b].resolution?c+a.option.columns[b].resolution(a.exhibitDatas[d][a.option.columns[b].id],a.exhibitDatas[d],a.option.columns[b],a,d,b):c+a.formatContent(a.option.columns[b],a.exhibitDatas[d][a.option.columns[b].id]);c+="\t\x3c/td\x3e"}),c+="\t\x3c/tr\x3e";var c=c+"\t\x3c/tbody\x3e",c=c+"\x3c/table\x3e",e=b("body").scrollTop();b("body").hide();b("html").append(c);window.print();b("#dlshouwen_grid_print_"+a.option.id).remove();b("body").show();b("#dlshouwen_grid_print_"+a.option.id+"_modal").modal("hide");b("body").scrollTop(e)});b("#dlshouwen_grid_print_"+a.option.id+"_modal").modal("show");a.init.printWindowIsInit=!0}},exportFile:function(a){var c=this;if(!c.init.exportWindowIsInit[a]){var d;d=""+b.fn.dlshouwen.grid.tools.getWindowStart("dlshouwen_grid_export_"+a+"_"+c.option.id,b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].title);d=d+'\x3cdiv class\x3d"form-export modal-body form-horizontal"\x3e\t\x3cdiv class\x3d"form-group"\x3e'+('\t\t\x3clabel class\x3d"col-sm-3 control-label"\x3e'+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].exportType.title+"\x3c/label\x3e");d=d+'\t\t\x3cdiv class\x3d"col-sm-9"\x3e\t\t\t\x3cdiv class\x3d"checkbox"\x3e'+('\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"dlshouwen_grid_export_export_all_data_'+a+"_"+c.option.id+'" value\x3d"0" checked\x3d"checked" /\x3e '+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].exportType.now+"\x3c/label\x3e");d+='\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"dlshouwen_grid_export_export_all_data_'+a+"_"+c.option.id+'" value\x3d"1" /\x3e '+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].exportType.all+"\x3c/label\x3e";d=d+'\t\t\t\x3c/div\x3e\t\t\x3c/div\x3e\t\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\t\x3ctable class\x3d"table table-bordered table-export"\x3e\t\t\x3cthead\x3e\t\t\t\x3ctr\x3e'+('\t\t\t\t\x3cth\x3e\x3cinput type\x3d"checkbox" id\x3d"dlshouwen_grid_export_check_'+a+"_"+c.option.id+'" checked\x3d"checked" /\x3e\x3c/th\x3e');d+="\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.column+"\x3c/th\x3e";d+="\t\t\t\t\x3cth\x3e"+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.operation+"\x3c/th\x3e";d+="\t\t\t\x3c/tr\x3e\t\t\x3c/thead\x3e\t\t\x3ctbody\x3e";for(var e=0;e<c.option.columns.length;e++){var g=c.option.columns[e];0!=g["export"]&&(d+='\t\t\x3ctr id\x3d"dlshouwen_grid_export_tr_'+a+"_"+c.option.id+"_"+e+'"\x3e',d+='\t\t\t\x3ctd\x3e\x3cinput type\x3d"checkbox" id\x3d"dlshouwen_grid_export_check_'+a+"_"+c.option.id+"_"+e+'" checked\x3d"checked" value\x3d"'+e+'" /\x3e\x3c/td\x3e',d+="\t\t\t\x3ctd\x3e"+g.title+"\x3c/td\x3e",d+="\t\t\t\x3ctd\x3e",d+='\t\t\t\t\x3cbutton type\x3d"button" class\x3d"btn btn-xs btn-default" dataId\x3d"'+e+'" id\x3d"dlshouwen_grid_export_up_'+a+"_"+c.option.id+"_"+e+'" title\x3d"'+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.buttons.upTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.buttons.up+"\x3c/button\x3e",d+='\t\t\t\t\x3cbutton type\x3d"button" class\x3d"btn btn-xs btn-default" dataId\x3d"'+e+'" id\x3d"dlshouwen_grid_export_down_'+a+"_"+c.option.id+"_"+e+'" title\x3d"'+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.buttons.downTitle+'"\x3e'+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].table.buttons.down+"\x3c/button\x3e",d+="\t\t\t\x3c/td\x3e",d+="\t\t\x3c/tr\x3e")}e=""+('\x3cbutton type\x3d"button" class\x3d"btn btn-primary" id\x3d"dlshouwen_grid_export_execute_'+a+"_"+c.option.id+'"\x3e');e+="\t"+b.fn.dlshouwen.grid.lang[c.option.lang]["export"][a].buttons["export"];d=d+"\t\t\x3c/tbody\x3e\t\x3c/table\x3e\x3c/div\x3e"+b.fn.dlshouwen.grid.tools.getWindowEnd(b.fn.dlshouwen.grid.lang[c.option.lang].buttons.close,e+"\x3c/button\x3e");b("body").append(d);b("#dlshouwen_grid_export_check_"+a+"_"+c.option.id).click(function(){b("input[id*\x3ddlshouwen_grid_export_check_"+a+"_"+c.option.id+"_]").attr("checked",this.checked)});b("button[id*\x3ddlshouwen_grid_export_up_"+a+"_"+c.option.id+"_]").click(function(){var d=b(this).attr("dataId"),e=c.option.id;b("#dlshouwen_grid_export_tr_"+a+"_"+e+"_"+d).prev("#dlshouwen_grid_export_"+a+"_"+e+"_modal tr[id*\x3ddlshouwen_grid_export_tr_"+a+"_"+e+"]").before(b("#dlshouwen_grid_export_tr_"+a+"_"+e+"_"+d))});b("button[id*\x3ddlshouwen_grid_export_down_"+a+"_"+c.option.id+"_]").click(function(){var d=b(this).attr("dataId"),e=c.option.id;b("#dlshouwen_grid_export_tr_"+a+"_"+e+"_"+d).next("#dlshouwen_grid_export_"+a+"_"+e+"_modal tr[id*\x3ddlshouwen_grid_export_tr_"+a+"_"+e+"]").after(b("#dlshouwen_grid_export_tr_"+a+"_"+e+"_"+d))});b("#dlshouwen_grid_export_execute_"+a+"_"+c.option.id).click(function(){b("#dlshouwen_grid_export_form_container_"+a+"_"+c.option.id).remove();var d=document.createElement("div");d.id="dlshouwen_grid_export_form_container_"+a+"_"+c.option.id;d.className="hidden";var e=document.createElement("iframe");e.name="dlshouwen_grid_export_iframe_"+a+"_"+c.option.id;d.appendChild(e);e=document.createElement("form");e.id="dlshouwen_grid_export_form_"+a+"_"+c.option.id;e.method="post";e.target="dlshouwen_grid_export_iframe_"+a+"_"+c.option.id;e.action=0==c.option.ajaxLoad||1==c.option.loadAll?c.option.exportURL:c.option.loadURL;var f={};f.pageSize=c.pager.pageSize;f.startRecord=c.pager.startRecord;f.nowPage=c.pager.nowPage;f.recordCount=c.pager.recordCount;f.pageCount=c.pager.pageCount;f.isExport=!0;f.exportFileName=c.option.exportFileName;f.exportType=a;f.exportAllData="1"==b("input[name*\x3ddlshouwen_grid_export_export_all_data_"+a+"_"+c.option.id+"]:checked").val()?!0:!1;f.parameters={};f.fastQueryParameters={};f.advanceQueryConditions=[];f.advanceQuerySorts=[];c.parameters&&(f.parameters=c.parameters);c.fastQueryParameters&&(f.fastQueryParameters=c.fastQueryParameters);c.advanceQuery&&c.advanceQuery.advanceQueryConditions&&(f.advanceQueryConditions=c.advanceQuery.advanceQueryConditions);c.advanceQuery&&c.advanceQuery.advanceQuerySorts&&(f.advanceQuerySorts=c.advanceQuery.advanceQuerySorts);var g=[];b("input[id*\x3ddlshouwen_grid_export_check_"+a+"_"+c.option.id+"_]:checked").each(function(){g.push(c.option.columns[this.value])});f.exportColumns=g;var l=[],n=!1;if(!f.exportAllData)l=c.exhibitDatas,n=!0;else if(0==c.option.ajaxLoad||1==c.option.loadAll)l=c.originalDatas,n=!0;f.exportDataIsProcessed=n;for(var n=[],p=0;p<l.length;p++){var r=l[p],u={};b("input[id*\x3ddlshouwen_grid_export_check_"+a+"_"+c.option.id+"_]:checked").each(function(){var a=c.option.columns[this.value],b=c.formatContent(a,r[a.id]);u[a.id]=b});n.push(u)}f.exportDatas=n;l=document.createElement("input");l.type="hidden";l.id="gridPager";l.name="gridPager";l.value=JSON.stringify(f);e.appendChild(l);d.appendChild(e);b("body").append(d);b("#dlshouwen_grid_export_form_"+a+"_"+c.option.id).submit();b("#dlshouwen_grid_export_"+a+"_"+c.option.id+"_modal").modal("hide")});c.init.exportWindowIsInit[a]=!0}b("#dlshouwen_grid_export_"+a+"_"+c.option.id+"_modal").modal("show")},getCheckedRecords:function(){gridReflectionObj=this;var a=[];b("input[id*\x3ddlshouwen_grid_"+gridReflectionObj.option.id+"_check_]:checked").each(function(){a.push(gridReflectionObj.exhibitDatas[this.value])});return a},reload:function(a){a?this.load():(this.constructGrid(),this.constructGridPageBar())},refresh:function(a){this.reload(a)}}},tools:{guid:function(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var n=16*Math.random()|0;return("x"==b?n:n&3|8).toString(16)})},getWindowStart:function(b,n,p){var a="";p&&("lg"==p&&(a="modal-lg"),"sm"==p&&(a="modal-sm"));p=""+('\x3cdiv class\x3d"modal fade dlshouwen-grid-modal" id\x3d"'+b+'_modal" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"'+b+'ModalLabel" aria-hidden\x3d"true"\x3e')+('\t\x3cdiv class\x3d"modal-dialog '+a+'"\x3e')+'\t\t\x3cdiv class\x3d"modal-content"\x3e';p+='\t\t\t\x3cdiv class\x3d"modal-header"\x3e';p+='\t\t\t\t\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e';return p=p+('\t\t\t\t\x3ch5 class\x3d"modal-title" id\x3d"'+b+'ModalLabel"\x3e'+n+"\x3c/h5\x3e")+"\t\t\t\x3c/div\x3e"},getWindowEnd:function(b,n){var p;p='\t\t\t\x3cdiv class\x3d"modal-footer"\x3e\t\t\t\t\x3cbutton type\x3d"button" class\x3d"btn btn-default" data-dismiss\x3d"modal"\x3e\t\t\t\t\t'+b+"\t\t\t\t\x3c/button\x3e"+("\t\t\t\t"+n);p+="\t\t\t\x3c/div\x3e";p+="\t\t\x3c/div\x3e";p+="\t\x3c/div\x3e";return p+="\x3c/div\x3e"},toastZIndex:1090,toastThread:null,toastFadeInAnimateTime:500,toastFadeOutAnimateTime:500,openToast:function(l,n,p){n=n?n:"info";p=p?p:3E3;var a="";"info"==n&&(a="text-primary");"warning"==n&&(a="text-warning");"error"==n&&(a="text-danger");"success"==n&&(a="text-success");clearTimeout(b.fn.dlshouwen.grid.tools.toastThread);b(".toast").remove();l='\x3cdiv class\x3d"toast '+a+'" style\x3d"z-index:'+b.fn.dlshouwen.grid.tools.toastZIndex+'"\x3e'+l+"\x3c/div\x3e";b("body").append(l);l=b(window).width()/2-b(".toast").width()/2-20;b(".toast").css("left",l);b(".toast").fadeIn(b.fn.dlshouwen.grid.tools.toastFadeInAnimateTime,function(){p&&(b.fn.dlshouwen.grid.tools.toastThread=setTimeout(b.fn.dlshouwen.grid.tools.removeToast,p))})},removeToast:function(){b(".toast").fadeOut(b.fn.dlshouwen.grid.tools.toastFadeOutAnimateTime,function(){b(".toast").remove()})},toast:function(l,n,p){b.fn.dlshouwen.grid.tools.openToast(l,n,p)},toDate:function(b,n){n&&null!=n||(n="yyyy-MM-dd hh:mm:ss");var p={"y+":"y","M+":"M","d+":"d","h+":"h","m+":"m","s+":"s"},a={y:"",M:"",d:"",h:"00",m:"00",s:"00"},c=n,d;for(d in p)(new RegExp("("+d+")")).test(n)&&(a[p[d]]=b.substring(c.indexOf(RegExp.$1),c.indexOf(RegExp.$1)+RegExp.$1.length));return new Date(a.y,a.M-1,a.d,a.h,a.m,a.s)},dateFormat:function(b,n){if(""==b)return"";b.time&&(b=new Date(b.time));var p={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in p)(new RegExp("("+a+")")).test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?p[a]:("00"+p[a]).substr((""+p[a]).length)));return n},replaceAll:function(b,n,p){return b.replace(new RegExp(n,"gm"),p)},startsWith:function(b,n){return void 0==n?!1:0==b.indexOf(n)?!0:!1},endsWith:function(b,n){return void 0==n?!1:b.lastIndexOf(n)==b.length-n.length?!0:!1},equalsIgnoreCase:function(b,n){return new String(b.toLowerCase())==(new String(n)).toLowerCase()},numberFormat:function(l,n){var p="false",a=Number(l).toString();0==a.indexOf("-")&&(p="true",a=a.replace("-",""),l=-l);var c,d,e;if(""==b.trim(a))return"";/\./g.test(n)?(d=n.split(".")[0],e=n.split(".")[1]):(d=n,e=null);if(/\./g.test(a))if(null!=e){var g=Math.round(parseFloat("0."+a.split(".")[1])*Math.pow(10,e.length))/Math.pow(10,e.length),a=(Math.floor(l)+Math.floor(g)).toString();c=/\./g.test(g.toString())?g.toString().split(".")[1]:"0"}else a=Math.round(l).toString(),c="0";else c="0";if(null!=d){var g=d.match(/0*$/)[0].length,h=null;/,/g.test(d)&&(h=d.match(/,[^,]*/)[0].length-1);d=new RegExp("(\\d{"+h+"})","g");a.length<g&&(a=Array(g+1).join("0")+a,a=a.substr(a.length-g,g));a=a.substr(0,a.length%h)+a.substring(a.length%h).replace(d,(null!=h?",":"")+"$1");a=a.replace(/^,/,"")}if(null!=e)g=e.match(/^0*/)[0].length,c.length<g?(d=c+Array(g+1).join("0"),c=d.substring(0,g),e=d.substring(g,e.length),d=c+e.replace(/0*$/,"")):d=0==c&&0==g?"":c.substring(0,e.length),c=d;else if(""!=n||""==n&&"0"==c)c="";return"true"==p?"-"+a+(""==c?"":"."+c):a+(""==c?"":"."+c)}}}})(jQuery);(function(b){b.fn.dlshouwen.grid.defaultOptions={grid:{lang:"zh-cn",ajaxLoad:!0,loadAll:!1,loadURL:"",datas:null,check:!1,exportFileName:"datas",tableStyle:"",tableClass:"table table-bordered table-hover table-responsive table-condensed",showHeader:!0,gridContainer:"grid_container",toolbarContainer:"grid_toolbar_container",tools:"refresh|fastQuery|advanceQuery|export[excel,csv,pdf,txt]|print",exportFileName:"datas",exportURL:path+"/core/base/extra/grid/export",pageSize:20,pageSizeLimit:[20,50,100]},column:{id:"field",title:"field",type:"string",format:null,otype:null,oformat:null,columnStyle:"",columnClass:"",headerStyle:"",headerClass:"",hide:!1,hideType:"",extra:!0,codeTable:null,fastQuery:!1,fastQueryType:"",advanceQuery:!0,"export":!0,print:!0,resolution:null}}})(jQuery);